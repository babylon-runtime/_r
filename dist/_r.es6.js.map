{"version":3,"file":"_r.es6.js","sources":["../src/is.ts","../src/global.ts","../src/data.ts","../src/events/core.ts","../src/util/queryString.ts","../src/util/extend.ts","../src/activateCamera.ts","../src/patch/patchPlugin.ts","../src/Selector.ts","../src/Elements.ts","../src/select.ts","../src/load.ts","../src/patch/patchElement.ts","../src/patch/patch.ts","../src/util/loadingScreen.ts","../src/launch.ts","../src/renderLoop.ts","../src/events/keys.ts","../src/events/meshes.ts","../src/events/index.ts","../src/util/color.ts","../src/patch/plugins/colors.ts","../src/patch/plugins/forEach.ts","../src/patch/plugins/fresnelParameters.ts","../src/patch/plugins/execute.ts","../src/patch/plugins/scene.ts","../src/patch/plugins/data.ts","../src/patch/plugins/events.ts","../src/patch/plugins/nodeByName.ts","../src/patch/plugins/patchParallel.ts","../src/animate.ts","../src/show.hide/normals.ts","../src/show.hide/wireframe.ts","../src/show.hide/gizmo.ts","../src/show.hide/index.ts","../src/util/router.ts","../src/util/merge.ts","../src/util/freeze.ts","../src/index.ts"],"sourcesContent":["export module is {\r\n  export function Function(functionToCheck): boolean {\r\n    var getType = {};\r\n    return functionToCheck && getType.toString.call(functionToCheck) === '[object Function]';\r\n  }\r\n\r\n  export function Number(n): boolean {\r\n    return !isNaN(parseFloat(n)) && isFinite(n);\r\n  }\r\n\r\n  export function PlainObject(n): boolean {\r\n    // Basic check for Type object that's not null\r\n    if (typeof n == 'object' && n !== null) {\r\n      // If Object.getPrototypeOf supported, use it\r\n      if (typeof Object.getPrototypeOf == 'function') {\r\n        var proto = Object.getPrototypeOf(n);\r\n        return proto === Object.prototype || proto === null;\r\n      }\r\n      // Otherwise, use internal class\r\n      // This should be reliable as if getPrototypeOf not supported, is pre-ES5\r\n      return Object.prototype.toString.call(n) == '[object Object]';\r\n    }\r\n    // Not an object\r\n    return false;\r\n  }\r\n\r\n  export function AssetContainer(x: any) {\r\n    return x instanceof BABYLON.AssetContainer;\r\n  }\r\n\r\n  export function Scene(x: any) {\r\n    return x instanceof BABYLON.Scene;\r\n  }\r\n\r\n  export function TransformNode(x : any) {\r\n    return x instanceof BABYLON.TransformNode;\r\n  }\r\n\r\n  export function Array(x: any): boolean {\r\n    return window['Array'].isArray(x);\r\n  }\r\n\r\n  export function Mesh(x: any): boolean {\r\n    return x instanceof BABYLON.AbstractMesh;\r\n  }\r\n\r\n  export function Material(x: any): boolean {\r\n    return x instanceof BABYLON.Material;\r\n  }\r\n\r\n  export function MultiMaterial(x: any): boolean {\r\n    return x instanceof BABYLON.MultiMaterial;\r\n  }\r\n\r\n  export function Texture(x: any): boolean {\r\n    return x instanceof BABYLON.Texture;\r\n  }\r\n\r\n  export function Light(x: any): boolean {\r\n    return x instanceof BABYLON.Light;\r\n  }\r\n\r\n  export function Camera(x: any): boolean {\r\n    return x instanceof BABYLON.Camera;\r\n  }\r\n\r\n  export function Vector3(x: any): boolean {\r\n    return x instanceof BABYLON.Vector3 || (is.Array(x) && x.length == 3);\r\n  }\r\n\r\n  export function Vector2(x: any): boolean {\r\n    return x instanceof BABYLON.Vector2;\r\n  }\r\n\r\n  export function Color(x: any): boolean {\r\n    //TODO\r\n    //return HexColor(x) || x instanceof BABYLON.Color3 || x instanceof BABYLON.Color4 || _r.colorNames[x] != null || (is.String(x) && (x.trim().indexOf('rgb(') == 0 ||  x.trim().indexOf('rgba(') == 0));\r\n    return HexColor(x) || x instanceof BABYLON.Color3 || x instanceof BABYLON.Color4 || (is.String(x) && (x.trim().indexOf('rgb(') == 0 || x.trim().indexOf('rgba(') == 0));\r\n  }\r\n\r\n  export function HexColor(x: any): boolean {\r\n    return String(x) && x[0] == '#';\r\n  }\r\n\r\n  export function Float(n: any): boolean {\r\n    return Number(n) === n && n % 1 !== 0;\r\n  }\r\n\r\n  export function Int(n: any): boolean {\r\n    return Number(n) === n && n % 1 === 0;\r\n  }\r\n\r\n  export function Quaternion(n: any): boolean {\r\n    return n instanceof BABYLON.Quaternion;\r\n  }\r\n\r\n  export function Matrix(n: any): boolean {\r\n    return n instanceof BABYLON.Matrix;\r\n  }\r\n\r\n  export function String(x: any): boolean {\r\n    return typeof x === \"string\";\r\n  }\r\n\r\n  export function Size(n: any): boolean {\r\n    return n instanceof BABYLON.Size;\r\n  }\r\n\r\n  export function PatchFile(expr: string) {\r\n    return FileWithExtension(expr, [\"runtime\", \"patch\", \"js\"]);\r\n  }\r\n\r\n  export function Boolean(expr: any): boolean {\r\n    return typeof expr == 'boolean';\r\n  }\r\n\r\n  /**\r\n   * Camera || Light || Material || Mesh || Texture ||\r\n   * @param x\r\n   * @constructor\r\n   */\r\n  export function BabylonNode(x: any) {\r\n    return is.Camera(x) || is.Light(x) || is.Material(x) || is.Mesh(x) || is.Texture(x);\r\n  }\r\n\r\n  /**\r\n   * Check is a javascript Object is a DOM Object\r\n   * @param expr\r\n   * @constructor\r\n   */\r\n  export function DOM(expr: any): boolean {\r\n    // from https://stackoverflow.com/questions/384286/javascript-isdom-how-do-you-check-if-a-javascript-object-is-a-dom-object\r\n    return (\r\n      typeof HTMLElement === \"object\" ? expr instanceof HTMLElement : //DOM2\r\n        expr && typeof expr === \"object\" && expr !== null && expr.nodeType === 1 && typeof expr.nodeName === \"string\"\r\n    );\r\n  }\r\n  DOM.canvas = function(expr : any) {\r\n    return expr instanceof HTMLCanvasElement;\r\n  };\r\n  DOM.div = function(expr : any) {\r\n    return expr instanceof HTMLDivElement;\r\n  };\r\n  DOM.image = function(expr : any) {\r\n    return expr instanceof HTMLImageElement;\r\n  };\r\n  /**\r\n   * Test for any Primitive\r\n   * @param x\r\n   * @returns {boolean}\r\n   * @constructor\r\n   */\r\n  export function Primitive(x: any) {\r\n    return x !== Object(x);\r\n  }\r\n\r\n  export function Promise(x: any) {\r\n    return x && typeof x[\"then\"] == 'function';\r\n  }\r\n\r\n  export function FileWithExtension(file : string, ext : string | string[]) {\r\n    if (typeof file !== 'string') {\r\n      return false;\r\n    }\r\n    let split = file.split('.');\r\n    if (split.length === 1) {\r\n      return false;\r\n    }\r\n    let extension = split.pop().trim();\r\n    if (is.Array(ext)) {\r\n      ext = <string[]> ext;\r\n      for (let i = 0; i < ext.length; i++) {\r\n        let _ext = ext[i].trim();\r\n        if (_ext === extension || _ext === ('.' + extension)) {\r\n          return true;\r\n        }\r\n      }\r\n      return false;\r\n    }\r\n    else {\r\n      return ext === extension || ext === ('.' + extension);\r\n    }\r\n  }\r\n\r\n  export function ImageFile(file : string) {\r\n    return FileWithExtension(file, [\"jpg\", \"jpeg\", \"png\", \"gif\"]);\r\n  }\r\n}\r\n","import { is } from \"./is.js\";\r\nlet _scene, _engine, _canvas;\r\n\r\nexport class global {\r\n  static fn = {};\r\n  static get canvas() {\r\n    if (!_canvas) {\r\n      if (BABYLON.Engine.LastCreatedEngine) {\r\n        let canvas = BABYLON.Engine.LastCreatedEngine.getRenderingCanvas();\r\n        if (canvas) {\r\n          _canvas = canvas;\r\n          return _canvas;\r\n        }\r\n      }\r\n      _canvas = document.createElement('canvas');\r\n      _canvas.setAttribute('touch-action', 'none');\r\n      _canvas.style.width = \"100%\";\r\n      _canvas.style.height = \"100%\";\r\n      return _canvas;\r\n    }\r\n    return _canvas;\r\n  }\r\n\r\n  static set canvas(value) {\r\n    if (is.String(value)) {\r\n      _canvas = document.getElementById(value);\r\n    }\r\n    else {\r\n      _canvas = value;\r\n    }\r\n  }\r\n\r\n  static get engine() {\r\n    if (!_engine) {\r\n      if (BABYLON.Engine.LastCreatedEngine) {\r\n        _engine = BABYLON.Engine.LastCreatedEngine;\r\n      }\r\n      else {\r\n        _engine = new BABYLON.Engine(global.canvas, true);\r\n      }\r\n\r\n    }\r\n    return _engine;\r\n  }\r\n\r\n  static set engine(value) {\r\n    _engine = value;\r\n    // the canvas/window resize event handler\r\n    window.addEventListener('resize', function() {\r\n      _engine.resize();\r\n    });\r\n  }\r\n\r\n  static get scene() {\r\n    if (!_scene) {\r\n      if (BABYLON.Engine.LastCreatedScene) {\r\n        _scene = BABYLON.Engine.LastCreatedScene;\r\n      }\r\n      else {\r\n        _scene = new BABYLON.Scene(global.engine);\r\n      }\r\n    }\r\n    return _scene;\r\n  }\r\n\r\n  static set scene(value) {\r\n    _scene = value;\r\n  }\r\n\r\n  static TRACE = false;\r\n}","import { is } from \"./is.js\";\r\nimport { global } from \"./global.js\";\r\n\r\nlet cache = [];\r\nlet expando = '_r' + Date.now();\r\n\r\n/**\r\n * Attach any data to any js object (inspired by {@link https://api.jquery.com/data/ |jQuery.data()}).\r\n * @param element\r\n * @param key\r\n * @param value\r\n */\r\nexport function data(element : any, key?: string, value?: any) {\r\n    if (!element.hasOwnProperty(expando)) {\r\n        element[expando] = cache.length;\r\n        cache[element[expando]] = {};\r\n    }\r\n    if (key != null) {\r\n        if (value !== undefined) {\r\n            cache[element[expando]][key] = value;\r\n        }\r\n        else {\r\n            return cache[element[expando]][key];\r\n        }\r\n    }\r\n    else {\r\n        return cache[element[expando]];\r\n    }\r\n}\r\n\r\nglobal.fn[\"data\"] = function(key? : string, value? : any) {\r\n    if (key != null && value != null) {\r\n        for (let i = 0; i < this.length; i++) {\r\n            data(this[i], key, value);\r\n        }\r\n    }\r\n    else {\r\n        return data(this[0], key, value);\r\n    }\r\n};\r\n","import { data } from \"../data.js\";\r\nimport { is } from \"../is.js\";\r\n\r\nexport function on(element: any, event: string, handler: (...args: any[]) => void, repeat = true) {\r\n  if (!data(element, '_r.e')) {\r\n    data(element, '_r.e', {});\r\n  }\r\n  let events = data(element, '_r.e');\r\n  if (!events[event]) {\r\n    events[event] = [];\r\n  }\r\n  events[event].push({\r\n    handler: handler,\r\n    repeat: repeat\r\n  });\r\n}\r\n\r\nexport function one(element: any, event: string, handler: (...args: any[]) => void) {\r\n  on(element, event, handler, false);\r\n}\r\n\r\nexport function trigger(element: any, event: string, ...extraParameters: any[]) {\r\n  let events = data(element, '_r.e');\r\n  if (!events) {\r\n    return;\r\n  }\r\n  let handlers = events[event];\r\n  if (is.Array(handlers)) {\r\n    handlers.forEach(function(callback) {\r\n      try {\r\n        callback.handler.call(element, ...extraParameters);\r\n        if (!callback.repeat) {\r\n          off(element, event, callback.handler);\r\n        }\r\n      }\r\n      catch (ex) {\r\n        console.error(\"_r.trigger exception\", ex);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nexport function off(element: any, event: string, handler?: (...args: any[]) => void) {\r\n  let events = data(element, '_r.e');\r\n  if (events[event]) {\r\n    if (handler) {\r\n      events[event] = events[event].filter(function(_handler) {\r\n        if (_handler.handler.toString() == handler.toString()) {\r\n          events[event].splice(events[event].indexOf(_handler), 1);\r\n        }\r\n      });\r\n    }\r\n    else {\r\n      events[event] = [];\r\n    }\r\n  }\r\n}","import { on, off, one, trigger } from \"../events/core.js\";\r\n\r\nfunction getQueryStringParameter(name, url?) {\r\n  if (!url) {\r\n    url = window.location.href;\r\n  }\r\n  name = name.replace(/[\\[\\]]/g, '\\\\$&');\r\n  let regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),\r\n    results = regex.exec(url);\r\n  if (!results) {\r\n    return null;\r\n  }\r\n  if (!results[2]) {\r\n    return '';\r\n  }\r\n  return decodeURIComponent(results[2].replace(/\\+/g, ' '));\r\n}\r\n\r\nfunction updateUrlParameter(uri, key, value) {\r\n  // remove the hash part before operating on the uri\r\n  let i = uri.indexOf('#');\r\n  let hash = i === -1 ? ''  : uri.substr(i);\r\n  uri = i === -1 ? uri : uri.substr(0, i);\r\n\r\n  let re = new RegExp(\"([?&])\" + key + \"=.*?(&|$)\", \"i\");\r\n  let separator = uri.indexOf('?') !== -1 ? \"&\" : \"?\";\r\n\r\n  if (!value) {\r\n    // remove key-value pair if value is empty\r\n    uri = uri.replace(new RegExp(\"([?&]?)\" + key + \"=[^&]*\", \"i\"), '');\r\n    if (uri.slice(-1) === '?') {\r\n      uri = uri.slice(0, -1);\r\n    }\r\n    // replace first occurrence of & by ? if no ? is present\r\n    if (uri.indexOf('?') === -1) {\r\n      uri = uri.replace(/&/, '?');\r\n    }\r\n  } else if (uri.match(re)) {\r\n    uri = uri.replace(re, '$1' + key + \"=\" + value + '$2');\r\n  } else {\r\n    uri = uri + separator + key + \"=\" + value;\r\n  }\r\n  return uri + hash;\r\n}\r\n\r\nexport let queryString = {\r\n  get : function(name) {\r\n    return getQueryStringParameter(name);\r\n  },\r\n  set : function(name, value) {\r\n    if (history.pushState) {\r\n      let newurl = updateUrlParameter(window.location.href, name, value);\r\n      window.history.pushState(\r\n        {path: newurl},\r\n        '',\r\n        newurl);\r\n    }\r\n    this.trigger(name, value);\r\n  },\r\n  on : function(event: string, handler: (...args: any[]) => void, repeat = true) {\r\n    on(this, event, handler, repeat);\r\n  },\r\n  off : function(event: string, handler?: (...args: any[]) => void) {\r\n    off(this, event, handler);\r\n  },\r\n  one : function(event: string, handler: (...args: any[]) => void) {\r\n    one(this, event, handler);\r\n  },\r\n  trigger : function(event: string, extraParameters?: any) {\r\n    trigger(this, event, extraParameters);\r\n  },\r\n};","import { is } from \"../is.js\";\r\n\r\n/**\r\n * Merge the contents of two or more objects together into the first object.\r\n *\r\n * - If first parameter is equal to true, the merge becomes recursive (aka. deep copy). Passing false for this argument is not supported.\r\n * - When two or more object arguments are supplied to _r.extend(), properties from all of the objects are added to the target object. Arguments that are null or undefined are ignored.\r\n *\r\n * @param args\r\n * @returns {any}\r\n */\r\nexport function extend(...args: any[]): any {\r\n  /**\r\n   * inspired by https://j11y.io/jquery/#v=1.11.2&fn=jQuery.extend\r\n   * (https://github.com/jquery/jquery/blob/master/src/core.js)\r\n   */\r\n  let options, name, src, copy, isArray, clone,\r\n    target = args[0],\r\n    i = 1,\r\n    length = args.length,\r\n    deep = false;\r\n\r\n  // Handle a deep copy situation\r\n  if (typeof target === \"boolean\") {\r\n    deep = target;\r\n    target = arguments[1] || {};\r\n    // skip the boolean and the target\r\n    i++;\r\n  }\r\n  // Handle case when target is a string or something (possible in deep copy)\r\n  if (typeof target !== \"object\" && !is.Function(target)) {\r\n    target = {};\r\n  }\r\n\r\n  for (; i < length; i++) {\r\n    // Only deal with non-null/undefined values\r\n    if ((options = arguments[i]) != null) {\r\n      // Extend the base object\r\n      for (name in options) {\r\n        src = target[name];\r\n        copy = options[name];\r\n        // Prevent never-ending loop\r\n        if (target == copy) {\r\n          continue;\r\n        }\r\n        // Recurse if we're merging plain objects or arrays\r\n        if (deep && copy && (is.PlainObject(copy) || (isArray = is.Array(copy)))) {\r\n          if (isArray) {\r\n            isArray = false;\r\n            clone = src && is.Array(src) ? src : [];\r\n          }\r\n          else {\r\n            clone = src && is.PlainObject(src) ? src : {};\r\n          }\r\n          // Never move original objects, clone them\r\n          target[name] = extend(deep, clone, copy);\r\n        }\r\n        else {\r\n          // Don't bring in undefined values\r\n          if (copy !== undefined) {\r\n            target[name] = copy;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return target;\r\n}","import { global } from './global.js';\r\nimport { is } from \"./is.js\";\r\n\r\nexport function activateCamera(camera : string | BABYLON.Camera) {\r\n    if (global.scene.activeCamera) {\r\n        global.scene.activeCamera.detachControl();\r\n    }\r\n    if (is.String(camera)) {\r\n        global.scene.setActiveCameraByName(camera);\r\n    }\r\n    else {\r\n        global.scene.activeCamera = camera;\r\n    }\r\n    global.scene.activeCamera.attachControl(global.canvas);\r\n}","export let plugins : Array<IPatchPlugin> = [];\r\nexport interface IPatchPlugin {\r\n  test : (element, source, property) => boolean;\r\n  resolve : (element, source, property, context? : any) => any;\r\n}\r\nexport function registerPlugin(plugin : IPatchPlugin) {\r\n  plugins.push(plugin);\r\n}\r\nexport function getPlugin(element, source, property) : IPatchPlugin | null {\r\n  let plugin = null;\r\n  for (let i = 0; i < plugins.length; i++) {\r\n    if (plugins[i].test(element, source, property)) {\r\n      plugin = plugins[i];\r\n    }\r\n  }\r\n  return plugin;\r\n}","import { is } from \"./is.js\";\r\n\r\nexport class Selector {\r\n  type = \"all\";\r\n  filters: Array<any>;\r\n\r\n  constructor(selector: string) {\r\n    let filters = [];\r\n    let type = \"all\";\r\n    let item = selector.trim();\r\n    if (item.indexOf(\":mesh\") !== -1) {\r\n      type = \"mesh\";\r\n    }\r\n    if (item.indexOf(\":material\") !== -1) {\r\n      type = \"material\";\r\n    }\r\n    if (item.indexOf(\":light\") !== -1) {\r\n      type = \"light\";\r\n    }\r\n    if (item.indexOf(\":camera\") !== -1) {\r\n      type = \"camera\";\r\n    }\r\n    if (item.indexOf(\":texture\") !== -1) {\r\n      type = \"texture\";\r\n    }\r\n    if (item.indexOf(\":multimaterial\") !== -1) {\r\n      type = \"multimaterial\";\r\n    }\r\n    if (item.indexOf(':transformNode') !== -1) {\r\n      type = \"transformNode\";\r\n    }\r\n    [\":mesh\", \":material\", \":multimaterial\", \":camera\", \":light\", \":texture\", \":transformNode\"].forEach(function(type) {\r\n      item = item.replace(type, '');\r\n    });\r\n\r\n    // [isVisible][alpha!= 0.1]\r\n    let regExpAttribute = /\\[(.*?)\\]/;\r\n    let matches = [];\r\n    let match;\r\n    while (match = regExpAttribute.exec(selector)) {\r\n      matches.push(match[1]);\r\n      selector = selector.replace(regExpAttribute, '');\r\n    }\r\n    // TODO [material.diffuseTexture.name=texture*.jpg]\r\n    matches.forEach((expr) => {\r\n      if (expr.indexOf('!=') !== -1) {\r\n        let split = expr.split('!=');\r\n        let left = split[0].trim();\r\n        let right = split[1].trim();\r\n        try {\r\n          right = JSON.parse(right);\r\n        }\r\n        catch {\r\n          try {\r\n            right = JSON.parse(JSON.stringify(right));\r\n          }\r\n          catch {\r\n            console.error(\"_r.select - incorrect parameter : \" + right);\r\n          }\r\n        }\r\n        let func = (element) => {\r\n          let _split = left.split('.');\r\n          let _element = element;\r\n          for (let i = 0; i < _split.length; i++) {\r\n            if (_element != null && _element[_split[i]] != null) {\r\n              _element = _element[_split[i]];\r\n            } else {\r\n              _element = null;\r\n            }\r\n          }\r\n          return _element != null && _element != right;\r\n        };\r\n        filters.push(func);\r\n      }\r\n      else {\r\n        if (expr.indexOf('=') !== -1) {\r\n          let split = expr.split('=');\r\n          let left = split[0].trim();\r\n          let right = split[1].trim();\r\n          try {\r\n            right = JSON.parse(right);\r\n          }\r\n          catch {\r\n            try {\r\n              right = JSON.parse(JSON.stringify(right));\r\n            }\r\n            catch {\r\n              console.error(\"_r.select - incorrect parameter : \" + right);\r\n            }\r\n          }\r\n          let func = (element) => {\r\n            let _split = left.split('.');\r\n            let _element = element;\r\n            for (let i = 0; i < _split.length; i++) {\r\n              if (_element != null && _element[_split[i]] != null) {\r\n                _element = _element[_split[i]];\r\n              } else {\r\n                _element = null;\r\n              }\r\n            }\r\n            return _element != null && _element == right;\r\n          };\r\n          filters.push(func);\r\n        }\r\n        else {\r\n          let func = (element) => {\r\n            let left = expr.trim();\r\n            let _split = left.split('.');\r\n            let _element = element;\r\n            for (let i = 0; i < _split.length; i++) {\r\n              if (_element != null && _element[_split[i]] != null) {\r\n                _element = _element[_split[i]];\r\n              } else {\r\n                _element = null;\r\n              }\r\n            }\r\n            return _element != null;\r\n          };\r\n          filters.push(func);\r\n        }\r\n      }\r\n    });\r\n    item = item.replace(regExpAttribute, '');\r\n    // Here item only contains name selector i.e mesh.00*\r\n    item = item.replace(/\\./g, \"\\\\.\");\r\n    let exp = item.replace(/\\*/g, '.*');\r\n    let regExp = new RegExp('^' + exp + '$');\r\n    filters.push(function(element) {\r\n      return element.hasOwnProperty('name') && regExp.test(element.name);\r\n    });\r\n    // TODO :not(selector)\r\n    this.filters = filters;\r\n    this.type = type;\r\n  }\r\n\r\n  matchFilters(element) {\r\n    for (let i = 0; i < this.filters.length; i++) {\r\n      if (!this.filters[i](element)) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  matchType(element) {\r\n    if (this.type == \"all\") {\r\n      return true;\r\n    }\r\n    if (this.type == \"mesh\") {\r\n      return is.Mesh(element);\r\n    }\r\n    if (this.type == \"light\") {\r\n      return is.Light(element);\r\n    }\r\n    if (this.type == \"material\") {\r\n      return is.Material(element);\r\n    }\r\n    if (this.type == \"multimaterial\") {\r\n      return is.MultiMaterial(element);\r\n    }\r\n    if (this.type == \"texture\") {\r\n      return is.Texture(element);\r\n    }\r\n    if (this.type == \"camera\") {\r\n      return is.Camera(element);\r\n    }\r\n    if (this.type == \"transformNode\") {\r\n      return is.TransformNode(element);\r\n    }\r\n  }\r\n}","import { global } from \"./global.js\";\r\nimport { is } from \"./is.js\";\r\nimport { Selector } from \"./Selector.js\";\r\n\r\nexport class Elements {\r\n  length : number;\r\n  constructor(...elements : any) {\r\n    this.length = 0;\r\n    for (let i = 0; i < elements.length; i++) {\r\n      this.add(elements[i]);\r\n    }\r\n  }\r\n\r\n  add(element : any) {\r\n    if (is.Array(element)) {\r\n      for (let i = 0; i < element.length; i++) {\r\n        this.add(element[i]);\r\n      }\r\n      return;\r\n    }\r\n    if (is.AssetContainer(element)) {\r\n      for (let i = 0; i < element.meshes.length; i++) {\r\n        this[this.length++] = element.meshes[i];\r\n      }\r\n      for (let i = 0; i < element.lights.length; i++) {\r\n        this[this.length++] = element.lights[i];\r\n      }\r\n      for (let i = 0; i < element.materials.length; i++) {\r\n        this[this.length++] = element.materials[i];\r\n      }\r\n      for (let i = 0; i < element.textures.length; i++) {\r\n        this[this.length++] = element.textures[i];\r\n      }\r\n      for (let i = 0; i < element.cameras.length; i++) {\r\n        this[this.length++] = element.cameras[i];\r\n      }\r\n      return;\r\n    }\r\n    this[this.length++] = element;\r\n  }\r\n\r\n  contains(element : any) : boolean {\r\n    return this.toArray().indexOf(element) !== -1;\r\n  }\r\n\r\n  /**\r\n   * Iterate over elements and executing a function for each element.\r\n   * @param callback A function to execute for each element.\r\n   * @returns {_r.Elements}\r\n   */\r\n  each(callback: Function) : Elements {\r\n    for (let i = 0; i < this.length; i++) {\r\n      /** We can break the .each() loop at a particular iteration by making the callback function return false. Returning non-false is the same as a continue statement in a for loop; it will skip immediately to the next iteration. **/\r\n      if (callback.call(this[i], this[i], i) == false) {\r\n        return;\r\n      }\r\n    }\r\n    return this;\r\n  }\r\n  forEach(callback : Function) : Elements {\r\n    return this.each(callback);\r\n  }\r\n  /**\r\n   * Pass each element in the current matched set through a function, producing a new jQuery object containing the return values.\r\n   * @param func A function object that will be invoked for each element in the current set.\r\n   * @returns {_r.Elements}\r\n   */\r\n  map(func : (obj : any) => any) : Elements {\r\n    let result = new Elements();\r\n    let length = 0;\r\n    this.each(function(element) {\r\n      result[length++] = func(element);\r\n    });\r\n    result.length = length;\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Reduce the set of matched elements to those that match the selector or pass the function’s test.\r\n   * @param func A function used as a test for each element in the set. this is the current element.\r\n   * @returns {_r.Elements}\r\n   */\r\n  filter(func : (obj : any) => boolean) : Elements {\r\n    let result = new Elements();\r\n    this.each(function(element) {\r\n      if (func(element)) {\r\n        result.add(element);\r\n      }\r\n    });\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Retrieve all the elements contained in the set, as an array.\r\n   * @returns {Array}\r\n   */\r\n  toArray() {\r\n    let result = [];\r\n    for (let i = 0; i < this.length; i++) {\r\n      result.push(this[i]);\r\n    }\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Get the value of an attribute for the first element in the set of matched elements or set one or more attributes for every matched element.\r\n   * @param attribute The name of the attribute to get.\r\n   * @param value Optional value to set for the attribute.\r\n   * @returns {any}\r\n   */\r\n  attr(attribute : string, value? : any) {\r\n    if (value != null) {\r\n      this.each(function(item) {\r\n        item[attribute] = value;\r\n      });\r\n      return this;\r\n    }\r\n    else {\r\n      return this[0][attribute];\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Reduce the set of matched elements to the first in the set.\r\n   * @returns {any}\r\n   */\r\n  first() : any {\r\n    return this[0];\r\n  }\r\n\r\n  /**\r\n   * @param property\r\n   * @returns {_r.Elements}\r\n   */\r\n  log(property?: string) {\r\n    this.each(function(item) {\r\n      if (property) {\r\n        console.log(item[property]);\r\n      }\r\n      else {\r\n        console.log(item);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Insert elements in the set\r\n   * @param elements\r\n   * @returns {_r.Elements}\r\n   */\r\n  concat(...elements : any[]) : Elements {\r\n    elements.forEach((element) => {\r\n      let base;\r\n      if (element instanceof Elements) {\r\n        base = element;\r\n      }\r\n      else {\r\n        if (is.String(element)) {\r\n          base = new Elements(element);\r\n        }\r\n        else {\r\n          if (is.Array(element)) {\r\n            base = new Elements();\r\n            element.forEach(function(item) {\r\n              base[base.length++] = item;\r\n            });\r\n          }\r\n          else {\r\n            base = new Elements(element);\r\n          }\r\n        }\r\n      }\r\n      base.each(function(item) {\r\n        this[this.length++] = item;\r\n      });\r\n    });\r\n    return this;\r\n  }\r\n\r\n  select(selector : string) {\r\n    if (this.length === 1 && is.Scene(this[0])) {\r\n      return find(selector, this[0]);\r\n    }\r\n    else {\r\n      return find(selector, this);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Disposes all the assets in the container\r\n   */\r\n  dispose() {\r\n    for (let i = 0; i < this.length; i++) {\r\n      this[i].dispose();\r\n      delete this[i];\r\n    }\r\n  }\r\n\r\n  addToScene() {\r\n    this.each(function(element) {\r\n      if (is.Camera(element)) {\r\n        global.scene.addCamera(element);\r\n      }\r\n      if (is.Mesh(element)) {\r\n        global.scene.addMesh(element);\r\n      }\r\n      if (is.Material(element)) {\r\n        global.scene.addMaterial(element);\r\n      }\r\n      if (is.MultiMaterial(element)) {\r\n        global.scene.addMultiMaterial(element);\r\n      }\r\n      if (is.Texture(element)) {\r\n        global.scene.addTexture(element);\r\n      }\r\n      if (is.Light(element)) {\r\n        global.scene.addLight(element);\r\n      }\r\n    });\r\n    return this;\r\n  }\r\n\r\n  removeFromScene() {\r\n    this.each(function(element) {\r\n      if (is.Camera(element)) {\r\n        global.scene.removeCamera(element);\r\n        return false;\r\n      }\r\n      if (is.Mesh(element)) {\r\n        global.scene.removeMesh(element, true);\r\n        return false;\r\n      }\r\n      if (is.Material(element)) {\r\n        global.scene.removeMaterial(element);\r\n        return false;\r\n      }\r\n      if (is.MultiMaterial(element)) {\r\n        global.scene.removeMultiMaterial(element);\r\n        return false;\r\n      }\r\n      if (is.Texture(element)) {\r\n        global.scene.removeTexture(element);\r\n        return false;\r\n      }\r\n      if (is.Light(element)) {\r\n        global.scene.removeLight(element);\r\n        return false;\r\n      }\r\n    });\r\n    return this;\r\n  }\r\n  // TODO\r\n  remove(element : any) {\r\n    /**\r\n     let index = this.toArray().indexOf(element);\r\n     if(index) {\r\n\r\n        }\r\n     for (let property in PROPERTIES) {\r\n            if(element instanceof BABYLON[property]) {\r\n                this[this.length++] = element;\r\n                super[PROPERTIES[property]].push(element);\r\n                return;\r\n            }\r\n        }**/\r\n  }\r\n}\r\n\r\n/**\r\n * Helper to debug selector.\r\n * @param element\r\n * @param selector\r\n * @returns {boolean} true if element match the selector, false otherwise\r\n */\r\nexport function match(element : any, params : string) {\r\n  let _selector = new Selector(params);\r\n  return _selector.matchType(element) && _selector.matchFilters(element);\r\n}\r\n\r\nexport function find(params : string, container : BABYLON.Scene | Elements | BABYLON.AssetContainer) : Elements {\r\n  let elements = new Elements();\r\n  params.split(',').forEach(function(item) {\r\n    item = item.trim();\r\n    let selector = new Selector(item);\r\n    if (is.Scene(container) || is.AssetContainer(container)) {\r\n      container = <BABYLON.AssetContainer> container;\r\n      switch (selector.type) {\r\n        case \"material\" :\r\n          container.materials.forEach(function(material) {\r\n            if (selector.matchFilters(material)) {\r\n              elements.add(material);\r\n            }\r\n          });\r\n          break;\r\n        case \"mesh\" :\r\n          container.meshes.forEach(function(mesh) {\r\n            if (selector.matchFilters(mesh)) {\r\n              elements.add(mesh);\r\n            }\r\n          });\r\n          break;\r\n        case \"light\":\r\n          container.lights.forEach(function(light) {\r\n            if (selector.matchFilters(light)) {\r\n              elements.add(light);\r\n            }\r\n          });\r\n          break;\r\n        case \"multimaterial\":\r\n          container.multiMaterials.forEach(function(material) {\r\n            console.log(material.name);\r\n            if (is.MultiMaterial(material)) {\r\n              if (selector.matchFilters(material)) {\r\n                elements.add(material);\r\n              }\r\n            }\r\n          });\r\n          break;\r\n        case \"texture\":\r\n          container.textures.forEach(function(texture) {\r\n            if (selector.matchFilters(texture)) {\r\n              elements.add(texture);\r\n            }\r\n          });\r\n          break;\r\n        case \"camera\":\r\n          container.cameras.forEach(function(camera) {\r\n            if (selector.matchFilters(camera)) {\r\n              elements.add(camera);\r\n            }\r\n          });\r\n          break;\r\n        case \"transformNode\":\r\n          container.transformNodes.forEach(function(camera) {\r\n            if (selector.matchFilters(camera)) {\r\n              elements.add(camera);\r\n            }\r\n          });\r\n          break;\r\n        case \"all\":\r\n          container.materials.forEach(function(material) {\r\n            if (selector.matchFilters(material)) {\r\n              elements.add(material);\r\n            }\r\n          });\r\n          container.meshes.forEach(function(mesh) {\r\n            if (selector.matchFilters(mesh)) {\r\n              elements.add(mesh);\r\n            }\r\n          });\r\n          container.lights.forEach(function(light) {\r\n            if (selector.matchFilters(light)) {\r\n              elements.add(light);\r\n            }\r\n          });\r\n          container.textures.forEach(function(texture) {\r\n            if (selector.matchFilters(texture)) {\r\n              elements.add(texture);\r\n            }\r\n          });\r\n          container.cameras.forEach(function(camera) {\r\n            if (selector.matchFilters(camera)) {\r\n              elements.add(camera);\r\n            }\r\n          });\r\n          container.transformNodes.forEach(function(camera) {\r\n            if (selector.matchFilters(camera)) {\r\n              elements.add(camera);\r\n            }\r\n          });\r\n      }\r\n    }\r\n    else {\r\n      container = <Elements> container;\r\n      container.forEach(function(element) {\r\n        if (selector.matchType(element) && selector.matchFilters(element)) {\r\n          elements.add(element);\r\n        }\r\n      });\r\n    }\r\n  });\r\n  return elements;\r\n}","import { is } from \"./is.js\";\r\nimport { Elements, find } from \"./Elements.js\";\r\nimport { global } from \"./global.js\";\r\n\r\nexport function select(arg) {\r\n  let elements;\r\n  if (is.String(arg)) {\r\n    if ((<string> arg).toLowerCase() === \"scene\") {\r\n      return new Elements(global.scene);\r\n    }\r\n    elements = find(arg, global.scene);\r\n    if (global.TRACE === true && elements.length == 0) {\r\n      console.warn('BABYLON.Runtime::no object(s) found for selector \"' + arg + '\"');\r\n    }\r\n  }\r\n  else {\r\n    elements = new Elements(arg);\r\n  }\r\n  // plugins\r\n  for (let plugin in global.fn) {\r\n    Elements.prototype[plugin] = (...args) => {\r\n      return global.fn[plugin].call(elements, ...args);\r\n    };\r\n  }\r\n  return elements;\r\n}","import { is } from \"./is.js\";\r\nimport { global } from \"./global.js\";\r\nimport { select } from \"./select.js\";\r\n\r\nlet counter = 0;\r\n\r\nexport function load(resource : string | Array<string>, patch? : any) : Promise<any> {\r\n  if (is.Array(resource)) {\r\n    let promises = [];\r\n    resource = resource as Array<string>;\r\n    resource.forEach((item) => {\r\n      promises.push(load(item));\r\n    });\r\n    return Promise.all(promises);\r\n  }\r\n  else {\r\n    resource = resource as string;\r\n    if (is.ImageFile(resource)) {\r\n      return load.image(resource, patch);\r\n    }\r\n    if (is.FileWithExtension(resource, ['babylon', 'gltf', 'glb'])) {\r\n      return load.assets(resource, patch);\r\n    }\r\n    if (is.FileWithExtension(resource, ['json'])) {\r\n      return load.JSON(resource);\r\n    }\r\n    if (is.FileWithExtension(resource, ['js'])) {\r\n      return load.script(resource);\r\n    }\r\n     if (is.FileWithExtension(resource, ['css'])) {\r\n      return load.css(resource);\r\n    }\r\n    if (is.FileWithExtension(resource, ['patch'])) {\r\n      return load.patch(resource);\r\n    }\r\n    if (is.FileWithExtension(resource, ['txt'])) {\r\n      return load.ajax(resource);\r\n    }\r\n  }\r\n}\r\n\r\nload.image = function(image : string, patch? : any) : Promise<HTMLImageElement> {\r\n  return new Promise((resolve, reject) => {\r\n    let assetsManager = new BABYLON.AssetsManager(global.scene);\r\n    let task = assetsManager.addImageTask('_r.preload.task' + counter++, image);\r\n    task.onSuccess = function(task) {\r\n      if (patch) {\r\n        return select(task.image).patch(patch).then(() => {\r\n          resolve(task.image);\r\n        });\r\n      }\r\n      else {\r\n        resolve(task.image);\r\n      }\r\n    };\r\n    task.onError = function(task, message, exception) {\r\n      console.error(message, exception);\r\n      reject(message);\r\n    };\r\n    assetsManager.load();\r\n  });\r\n};\r\n\r\nload.assets = function(scene : string, patch? : any, progress? : (event : BABYLON.SceneLoaderProgressEvent) => any) : Promise<BABYLON.AssetContainer> {\r\n  let fileName = scene.split('/').pop();\r\n  let root = scene.replace(fileName, '');\r\n  BABYLON.SceneLoader.ShowLoadingScreen = false;\r\n  return BABYLON.SceneLoader.LoadAssetContainerAsync(root, fileName, global.scene, progress).then((assetsContainer) => {\r\n    if (patch) {\r\n      return select(assetsContainer).globalPatch(patch).then(() => {\r\n        BABYLON.SceneLoader.ShowLoadingScreen = true;\r\n        return assetsContainer;\r\n      });\r\n    }\r\n    else {\r\n      BABYLON.SceneLoader.ShowLoadingScreen = true;\r\n      return assetsContainer;\r\n    }\r\n  });\r\n};\r\n\r\nload.material = function(name : string, patch? : any) : Promise<BABYLON.StandardMaterial> {\r\n  let material = new BABYLON.StandardMaterial(name, global.scene);\r\n  return select(material).patch(patch).then(() => {\r\n    return material;\r\n  });\r\n};\r\n\r\nload.pbr = function(name : string, patch? : any) : Promise<BABYLON.PBRMaterial> {\r\n  let material =  new BABYLON.PBRMaterial(name, global.scene);\r\n  return select(material).patch(patch).then(() => {\r\n    return material;\r\n  });\r\n};\r\n\r\nload.texture = function(image : string, patch? : any) : Promise<BABYLON.Texture> {\r\n  return load(image).then((img) => {\r\n    let texture = new BABYLON.Texture(image, global.scene);\r\n    if (patch) {\r\n      return select(texture).patch(patch).then(() => {\r\n        return texture;\r\n      });\r\n    }\r\n    else {\r\n      return texture;\r\n    }\r\n  }, (err) => {\r\n    console.error(err);\r\n  });\r\n};\r\n\r\nlet cubeCounter = 0;\r\nload.cubeTexture = function(url : string, patch? : any) : Promise<BABYLON.CubeTexture> {\r\n  return new Promise((resolve, reject) => {\r\n    let assetsManager = new BABYLON.AssetsManager(global.scene);\r\n    let task = assetsManager.addCubeTextureTask('_r.load.cubeTexture.' + cubeCounter++, url);\r\n    task.onSuccess = function(task) {\r\n      if (patch) {\r\n        select(task.texture).patch(patch).then(() => {\r\n          resolve(task.texture);\r\n        });\r\n      }\r\n      else {\r\n        resolve(task.texture);\r\n      }\r\n    };\r\n    task.onError = function(reason) {\r\n      reject(reason);\r\n    };\r\n    assetsManager.load();\r\n  });\r\n};\r\n\r\nload.patch = function(file : string) : Promise<any> {\r\n  return new Promise((resolve, reject) => {\r\n    let xhr = new XMLHttpRequest();\r\n    xhr.open(\"get\", file, true);\r\n    xhr.onload = function() {\r\n      let status = xhr.status;\r\n      if (status == 200) {\r\n        let data;\r\n        let isJson = false;\r\n        try {\r\n          data = JSON.parse(xhr.response);\r\n          isJson = true;\r\n        }\r\n        catch (error) {\r\n          isJson = false;\r\n        }\r\n        if (!isJson) {\r\n          try {\r\n            data = window[\"eval\"].call(window, xhr.response);\r\n          }\r\n          catch (error) {\r\n            let __patch;\r\n            eval('var __patch = ' + xhr.response);\r\n            data = __patch;\r\n          }\r\n        }\r\n        if (data) {\r\n          resolve(data);\r\n        }\r\n        else {\r\n          console.warn('BABYLON.Runtime::no data found in ' + file);\r\n          resolve([{}]);\r\n        }\r\n\r\n      } else {\r\n        reject(status);\r\n      }\r\n    };\r\n    xhr.send();\r\n  });\r\n};\r\n\r\nlet ajaxCounter = 0;\r\nload.ajax = function(file : string) : Promise<string> {\r\n  return new Promise((resolve, reject) => {\r\n    let assetsManager = new BABYLON.AssetsManager(global.scene);\r\n    let task = assetsManager.addTextFileTask('_r.load.ajax.' + ajaxCounter++, file);\r\n    task.onSuccess = function(task) {\r\n     resolve(task.text);\r\n    };\r\n    task.onError = function(reason) {\r\n      reject(reason);\r\n    };\r\n    assetsManager.load();\r\n  });\r\n};\r\n\r\nload.JSON = function(file : string) : Promise<any> {\r\n  return new Promise((resolve, reject) => {\r\n    load.ajax(file).then((text : string) => {\r\n      try {\r\n        let data = JSON.parse(text);\r\n        resolve(data);\r\n      }\r\n      catch (e) {\r\n        reject(e);\r\n      }\r\n    });\r\n  });\r\n};\r\n\r\nload.script = function(file : string) : Promise<null> {\r\n  return new Promise((resolve, reject) => {\r\n    // Adding the script tag to the head as suggested before\r\n    let script = document.createElement('script');\r\n    // script.type = 'text/javascript';\r\n    script.src = file;\r\n\r\n    // Then bind the event to the callback function.\r\n    // There are several events for cross browser compatibility.\r\n    let resolved = false;\r\n    script['onreadystatechange'] = function() {\r\n      if (this.readyState === 'complete') {\r\n        if (resolved) {\r\n          return;\r\n        }\r\n        resolve();\r\n        resolved = true;\r\n      }\r\n    };\r\n    script.onload = function() {\r\n      if (resolved) {\r\n        return;\r\n      }\r\n      resolve();\r\n      resolved = true;\r\n    };\r\n    // Fire the loading\r\n    document.body.appendChild(script);\r\n  });\r\n};\r\n\r\nload.css = function(file : string) : Promise<null> {\r\n  return new Promise((resolve, reject) => {\r\n    // Adding the script tag to the head as suggested before\r\n    let link = document.createElement('link');\r\n    link.type = 'text/css';\r\n    link.href = file;\r\n    link.rel = 'stylesheet';\r\n\r\n    // Then bind the event to the callback function.\r\n    // There are several events for cross browser compatibility.\r\n    let resolved = false;\r\n    link['onreadystatechange'] = function() {\r\n      if (this.readyState === 'complete') {\r\n        if (resolved) {\r\n          return;\r\n        }\r\n        resolve();\r\n        resolved = true;\r\n      }\r\n    };\r\n    link.onload = function() {\r\n      if (resolved) {\r\n        return;\r\n      }\r\n      resolve();\r\n      resolved = true;\r\n    };\r\n    // Fire the loading\r\n    document.head.appendChild(link);\r\n  });\r\n};\r\n","import * as plugins from './patchPlugin.js';\r\nimport { is } from '../is.js';\r\nimport { Elements, find } from \"../Elements.js\";\r\nimport { global } from \"../global.js\";\r\nimport { load } from \"../load.js\";\r\n\r\nexport function recursive(elements, func, promisify = true) : any {\r\n  let index = 0;\r\n  function recurse() {\r\n    if (index === elements.length) {\r\n      return;\r\n    }\r\n    else {\r\n      let item = elements[index++];\r\n      try {\r\n        let res = func(item);\r\n        if (is.Promise(res)) {\r\n          return res.then(() => {\r\n            return recurse();\r\n          });\r\n        }\r\n        else {\r\n          return recurse();\r\n        }\r\n      }\r\n      catch (ex) {\r\n        return recurse();\r\n      }\r\n    }\r\n  }\r\n  let res = recurse();\r\n  if (is.Promise(res)) {\r\n    return res;\r\n  }\r\n  else {\r\n    // Promisify\r\n    if (promisify) {\r\n      return new Promise((resolve) => {\r\n        resolve();\r\n      });\r\n    }\r\n    else {\r\n      return res;\r\n    }\r\n  }\r\n}\r\n\r\nfunction globalPatchItem(patch : any, elements? : any) {\r\n  if (is.PatchFile(patch)) {\r\n    return load.patch(patch).then((data) => {\r\n      return globalPatch(data, elements);\r\n    });\r\n  }\r\n  else {\r\n    let selectors = Object.getOwnPropertyNames(patch);\r\n    let res = recursive(selectors, (selector) => {\r\n      if (elements) {\r\n        let plugin = plugins.getPlugin(elements, patch, selector);\r\n        if (plugin) {\r\n          return plugin.resolve(elements, patch, selector);\r\n        }\r\n      }\r\n      else {\r\n        let plugin = plugins.getPlugin(global.scene, patch, selector);\r\n        if (plugin) {\r\n          return plugin.resolve(global.scene, patch, selector);\r\n        }\r\n      }\r\n      //console.log(\"call to find\", selector, elements);\r\n      let _elements;\r\n      if (elements) {\r\n        _elements = find(selector, elements);\r\n      }\r\n      else {\r\n        _elements = find(selector, global.scene);\r\n      }\r\n      return patchElements(_elements.toArray(), patch[selector]);\r\n    }, false);\r\n    return res;\r\n  }\r\n}\r\n\r\nexport function globalPatch(patch : any, elements? : any) {\r\n  if (!elements) {\r\n    //elements = global.scene;\r\n  }\r\n  if (!is.Array(patch)) {\r\n    patch = [patch];\r\n  }\r\n  return recursive(patch, (_patch) => {\r\n   return globalPatchItem(_patch, elements);\r\n  }, false);\r\n}\r\n\r\nexport function patchElements(elements : Array<any>, patch : any, context? : Array<any>) {\r\n  return recursive(elements, (element) => {\r\n    return patchElement(element, patch, context);\r\n  }, false);\r\n}\r\n\r\nexport function patchElement(element : any, patch : any, context? : Array<any>) : any {\r\n  let properties = Object.getOwnPropertyNames(patch);\r\n  if (context) {\r\n    context.push(element);\r\n  }\r\n  else {\r\n    context = [element];\r\n  }\r\n  return recursive(properties, (property) => {\r\n    return patchProperty(element, patch, property, context);\r\n  }, false);\r\n}\r\n\r\nexport function patchProperty(element, source, property, context? : Array<any>) : any {\r\n  let plugin = plugins.getPlugin(element, source, property);\r\n  if (plugin) {\r\n    return plugin.resolve(element, source, property, context);\r\n  }\r\n  else {\r\n    if (is.Primitive(source[property])) {\r\n      element[property] = source[property];\r\n      return element[property];\r\n    }\r\n    if (is.Function(source[property])) {\r\n      if (is.Function(element[property])) {\r\n        element[property] = source[property];\r\n        return element[property];\r\n      }\r\n      else {\r\n        let res = source[property].apply(element, context);\r\n        if (is.Promise(res)) {\r\n          return res.then((value) => {\r\n            if (value) {\r\n              element[property] = value;\r\n            }\r\n          });\r\n        }\r\n        else {\r\n          element[property] = res;\r\n          return element[property];\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      if (is.Promise(source[property])) {\r\n        return source[property].then((result) => {\r\n          element[property] = result;\r\n        });\r\n      }\r\n      else {\r\n        if (is.PlainObject(source[property])) {\r\n          if (!element[property]) {\r\n            element[property] = {};\r\n          }\r\n          return patchElement(element[property], source[property], context);\r\n        }\r\n      }\r\n\r\n    }\r\n  }\r\n}","import { is } from \"../is.js\";\r\nimport { select } from \"../select.js\";\r\nimport { global } from \"../global.js\";\r\nimport { start, isStarted } from \"../renderLoop.js\";\r\nimport { patchElements, patchElement, globalPatch } from \"./patchElement.js\";\r\nimport { registerPlugin } from \"./patchPlugin.js\";\r\n\r\nimport { load } from \"../load.js\";\r\n\r\nexport function patch(patch : any, promisify = true) : Promise<any> {\r\n  if (is.PatchFile(patch)) {\r\n    return load.patch(patch).then((data) => {\r\n      let res = globalPatch(data);\r\n      if (promisify && !is.Promise(res)) {\r\n        return new Promise((resolve) => {\r\n          resolve(res);\r\n        });\r\n      }\r\n      else {\r\n        return res;\r\n      }\r\n    });\r\n  }\r\n  else {\r\n    if (!is.Array(patch)) {\r\n      patch = [patch];\r\n    }\r\n    let res = globalPatch(patch);\r\n    if (promisify && !is.Promise(res)) {\r\n      return new Promise((resolve) => {\r\n        resolve(res);\r\n      });\r\n    }\r\n    else {\r\n      return res;\r\n    }\r\n  }\r\n}\r\n\r\npatch.registerPlugin = registerPlugin;\r\n\r\nexport { patchElement, patchElements };\r\n\r\nglobal.fn[\"patch\"] = function(options, promisify = true) {\r\n  let res = patchElements(this.toArray(), options);\r\n  if (promisify && !is.Promise(res)) {\r\n    return new Promise((resolve) => {\r\n      resolve(res);\r\n    });\r\n  }\r\n  else {\r\n    return res;\r\n  }\r\n};\r\n\r\nglobal.fn[\"globalPatch\"] = function(options, promisify = true) {\r\n  let res = globalPatch(options, this.toArray());\r\n  if (promisify && !is.Promise(res)) {\r\n    return new Promise((resolve) => {\r\n      resolve(res);\r\n    });\r\n  }\r\n  else {\r\n    return res;\r\n  }\r\n};","import { global } from \"../global.js\";\r\n\r\ninterface ICustomLoadingScreen {\r\n  isVisible : boolean;\r\n  message : string;\r\n  progress : number;\r\n  postMessage? : Function;\r\n}\r\n\r\nexport class iFrameLoadingScreen {\r\n  public iframe : HTMLIFrameElement;\r\n  private _attached = false;\r\n  private _message : string;\r\n  private _progress : number;\r\n  private _contentDocument;\r\n  constructor(url : string, id? : string) {\r\n    this.iframe = document.createElement('iframe');\r\n    this.iframe.src = url;\r\n    if (id) {\r\n      this.iframe.id = id;\r\n    }\r\n    this.iframe.addEventListener('transitionend', () => {\r\n      if (!this.isVisible) {\r\n        this.parentNode.removeChild(this.iframe);\r\n        this._attached = false;\r\n      }\r\n    });\r\n    this.iframe.classList.add('runtime-loadingScreen');\r\n  }\r\n  private get parentNode() {\r\n    return global.canvas.parentNode;\r\n  }\r\n  displayLoadingUI() {\r\n    if (!this._attached) {\r\n      this.iframe.onload = () => {\r\n        if (this.iframe.contentDocument) {\r\n          this._contentDocument = this.iframe.contentDocument;\r\n        } else {\r\n          this._contentDocument =  this.iframe.contentWindow.document;\r\n        }\r\n        this.message = this._message;\r\n        if (this._progress) {\r\n          this.progress = this._progress;\r\n        }\r\n      };\r\n      this.parentNode.appendChild(this.iframe);\r\n      this._attached = true;\r\n    }\r\n    this.iframe.classList.add('visible');\r\n  }\r\n  hideLoadingUI() {\r\n    this.iframe.classList.remove('visible');\r\n  }\r\n  get isVisible() {\r\n    return this.iframe.classList.contains('visible');\r\n  }\r\n  set isVisible(value : boolean) {\r\n    if (value) {\r\n      this.displayLoadingUI();\r\n    }\r\n    else {\r\n      this.hideLoadingUI();\r\n    }\r\n  }\r\n  get message() {\r\n    return this._message;\r\n  }\r\n  set message(value : string) {\r\n    this._message = value;\r\n    if (this._contentDocument) {\r\n      let elements = this._contentDocument.getElementsByClassName('runtime-loading-message');\r\n      for (let i = 0; i < elements.length; i++) {\r\n        elements.item(i).innerHTML = value;\r\n      }\r\n      this.postMessage({\r\n        type : \"message\",\r\n        value : value\r\n      });\r\n    }\r\n  }\r\n  get progress() {\r\n    return this._progress;\r\n  }\r\n  set progress(value : number) {\r\n    this._progress = value;\r\n    if (this._contentDocument) {\r\n      let elements = this._contentDocument.getElementsByClassName('runtime-loading-progress');\r\n      for (let i = 0; i < elements.length; i++) {\r\n        elements.item(i).innerHTML = value.toString() + '%';\r\n      }\r\n      this.postMessage({\r\n        type : \"progress\",\r\n        value : value\r\n      });\r\n    }\r\n  }\r\n  public postMessage(data) {\r\n    setTimeout(() => {\r\n      let json = JSON.stringify(data);\r\n      this.iframe.contentWindow.postMessage(json.toString(), location.origin);\r\n    }, 100);\r\n  }\r\n}\r\n\r\nexport class loadingScreen  {\r\n  private static _instance : ICustomLoadingScreen;\r\n  private static get instance() : ICustomLoadingScreen {\r\n    return this._instance;\r\n  }\r\n  static iframe(url : string, id? : string) {\r\n    this.activate(new iFrameLoadingScreen(url, id));\r\n    global.engine.loadingScreen = this._instance;\r\n    return this._instance;\r\n  }\r\n  static activate(loadingScreen) {\r\n    this._instance = loadingScreen;\r\n  }\r\n  static get isVisible() : boolean {\r\n    if (this._instance) {\r\n      return this._instance.isVisible;\r\n    }\r\n    else {\r\n      let div = document.getElementById('babylonjsLoadingDiv');\r\n      if (div) {\r\n        return div.style.opacity === '1';\r\n      }\r\n      else {\r\n        return false;\r\n      }\r\n    }\r\n  }\r\n  static set isVisible(value : boolean) {\r\n    if (this._instance) {\r\n      this._instance.isVisible = value;\r\n    }\r\n    else {\r\n      if (value) {\r\n        let div = document.getElementById('babylonjsLoadingDiv');\r\n        if (div && div.style.opacity === '0') {\r\n          div.style.opacity = '1';\r\n        }\r\n        global.engine.displayLoadingUI();\r\n      }\r\n      else {\r\n        global.engine.hideLoadingUI();\r\n      }\r\n    }\r\n  }\r\n  static get message() : string {\r\n    if (this._instance) {\r\n       return this._instance.message;\r\n    }\r\n    else {\r\n      return global.engine.loadingScreen.loadingUIText;\r\n    }\r\n  }\r\n  static set message(value : string) {\r\n    if (this._instance) {\r\n      this.instance.message = value;\r\n    }\r\n    else {\r\n      global.engine.loadingScreen.loadingUIText = value;\r\n    }\r\n  }\r\n  static get progress() : number {\r\n    if (this._instance) {\r\n      return this.instance.progress;\r\n    }\r\n    else {\r\n      console.error(\"TODO _r.loadingScreen\");\r\n    }\r\n  }\r\n  static set progress(value : number) {\r\n    if (this._instance) {\r\n      this.instance.progress = value;\r\n    }\r\n    else {\r\n      this.message += ' ' + value + '%';\r\n    }\r\n  }\r\n  static postMessage(key, value) {\r\n    if (this._instance.postMessage) {\r\n      this._instance.postMessage(key, value);\r\n    }\r\n    else {\r\n      console.error('loadingScreen is not an iframe');\r\n    }\r\n  }\r\n}\r\n","import { is } from \"./is.js\";\r\nimport { extend }  from \"./util/extend.js\";\r\nimport { global } from \"./global.js\";\r\nimport { activateCamera } from \"./activateCamera.js\";\r\nimport { patch } from \"./patch/patch.js\";\r\nimport { load } from \"./load.js\";\r\nimport { loadingScreen }  from \"./util/loadingScreen.js\";\r\n\r\nlet isReady = false;\r\nlet callbacks = [];\r\n\r\nexport interface IRuntimeLoading {\r\n  container? : string | HTMLElement;\r\n  canvas?: string | HTMLCanvasElement;\r\n  assets?: string;\r\n  scene: Function | string;\r\n  activeCamera?: Function | string | any;\r\n  patch?: Array<any>;\r\n  beforeFirstRender?: Function;\r\n  ktx?: boolean | Array<string>;\r\n  enableOfflineSupport?: boolean;\r\n  progress?: Function;\r\n  loadingScreen?: any;\r\n  load? : string | Array<string>;\r\n  babylon? : string;\r\n}\r\n\r\nlet options : IRuntimeLoading = {\r\n  container : null,\r\n  canvas : null,\r\n  assets : null,\r\n  scene : null,\r\n  activeCamera : null,\r\n  patch : null,\r\n  ktx : false,\r\n  enableOfflineSupport : false,\r\n  progress: null,\r\n  loadingScreen: null,\r\n  load : null,\r\n  babylon : null\r\n};\r\n\r\nexport function launch(obj: IRuntimeLoading | string) : Promise<BABYLON.Scene> {\r\n  isReady = false;\r\n  options = extend(options, obj);\r\n  return new Promise((resolve, reject) => {\r\n    _setup().then(() => {\r\n      _createScene().then(() => {\r\n        _load().then(() => {\r\n          _patch().then(() => {\r\n            _checkActiveCamera();\r\n            _beforeFirstRender();\r\n            // RESIZE\r\n            window.addEventListener('resize', function() {\r\n              global.engine.resize();\r\n            });\r\n            global.engine.resize();\r\n            start();\r\n            isReady = true;\r\n            loadingScreen.isVisible = false;\r\n            callbacks.forEach(function(callback) {\r\n              try {\r\n                callback.call(global.scene);\r\n              }\r\n              catch (ex) {\r\n                console.error(ex);\r\n              }\r\n            });\r\n            callbacks.length = 0;\r\n            resolve(global.scene);\r\n          });\r\n        });\r\n      }, (err) => {\r\n        reject(err);\r\n      });\r\n    });\r\n  });\r\n}\r\n\r\nfunction _setup() : Promise<any> {\r\n  return _babylon().then(() => {\r\n    // CANVAS\r\n    if (options.canvas) {\r\n      if (is.String(options.canvas)) {\r\n        let element = document.getElementById(<string> options.canvas);\r\n        if (is.DOM.canvas(element)) {\r\n          global.canvas = element;\r\n        }\r\n        else {\r\n          console.error(\"_r.launch - \" + options.canvas + \"is not a valid HTMLCanvasElement\");\r\n        }\r\n      }\r\n      else {\r\n        if (is.DOM.canvas(options.canvas)) {\r\n          global.canvas = options.canvas;\r\n        }\r\n        else {\r\n          console.error(\"_r.launch - canvas parameter should be a string or a HTMLCanvasElement\");\r\n        }\r\n      }\r\n    }\r\n    if (options.container) {\r\n      if (is.String(options.container)) {\r\n        let parent = document.getElementById(<string> options.container);\r\n        parent.appendChild(global.canvas);\r\n      }\r\n      else {\r\n        (<HTMLElement> options.container).appendChild(global.canvas);\r\n      }\r\n    }\r\n    else {\r\n      document.body.appendChild(global.canvas);\r\n    }\r\n    // KTX\r\n    if (options.ktx) {\r\n      if (is.Array(options.ktx)) {\r\n        global.engine.setTextureFormatToUse(<string[]> options.ktx);\r\n      }\r\n      else {\r\n        if (options.ktx === true) {\r\n          global.engine.setTextureFormatToUse(['-astc.ktx', '-dxt.ktx', '-pvrtc.ktx', '-etc2.ktx']);\r\n        }\r\n      }\r\n    }\r\n    // ENABLE OFFLINE SUPPORT\r\n    if (options.enableOfflineSupport) {\r\n      global.engine.enableOfflineSupport = options.enableOfflineSupport;\r\n    }\r\n    else {\r\n      global.engine.enableOfflineSupport = false;\r\n    }\r\n    // LOADING SCREEN\r\n    if (options.loadingScreen) {\r\n      global.engine.loadingScreen = options.loadingScreen;\r\n    }\r\n    loadingScreen.isVisible = true;\r\n  });\r\n}\r\n\r\nfunction _babylon() : Promise<any> {\r\n  if (options.babylon) {\r\n    switch (options.babylon) {\r\n      case 'preview' :\r\n        return load('https://preview.babylonjs.com/babylon.js');\r\n      case 'stable':\r\n        return load('https://cdn.babylonjs.com/babylon.js');\r\n      default:\r\n        return load(options.babylon);\r\n    }\r\n  }\r\n  else {\r\n    return new Promise((resolve, reject) => { resolve(); });\r\n  }\r\n}\r\n\r\nfunction _createScene() : Promise<any> {\r\n  if (options.scene) {\r\n    if (is.String(options.scene)) {\r\n      // scene is a filename\r\n      if (options.assets) {\r\n        return load.assets(options.assets + <string>options.scene, null, (evt : BABYLON.SceneLoaderProgressEvent) => {\r\n          if (options.progress) {\r\n            options.progress(evt);\r\n          }\r\n        }).then((assetsContainer) => {\r\n          assetsContainer.addAllToScene();\r\n        });\r\n      } else {\r\n        return load.assets(<string>options.scene, null, (evt : BABYLON.SceneLoaderProgressEvent) => {\r\n          if (options.progress) {\r\n            options.progress(evt);\r\n          }\r\n        }).then((assetsContainer) => {\r\n          assetsContainer.addAllToScene();\r\n        });\r\n      }\r\n    } else {\r\n      return new Promise((resolve, reject) => {\r\n        if (is.Function(options.scene)) {\r\n          try {\r\n            let result = eval(\"var canvas=_r.canvas; var engine = _r.engine; var scene=_r.scene; var createScene=\" + options.scene + ';createScene()');\r\n            if (BABYLON.Engine.LastCreatedEngine.scenes.length == 2) {\r\n              BABYLON.Engine.LastCreatedEngine.scenes[0].dispose();\r\n            }\r\n            if (is.Scene(result)) {\r\n              global.scene = result;\r\n            }\r\n            resolve();\r\n          } catch (ex) {\r\n            reject(ex);\r\n            throw ex;\r\n          }\r\n        } else {\r\n          if (is.Scene(options.scene)) {\r\n            global.scene = options.scene;\r\n            resolve();\r\n          } else {\r\n            reject(\"invalid scene parameter in _r.launch\");\r\n            throw new Error(\"invalid scene parameter in _r.launch\");\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\nfunction _patch() : Promise<null> {\r\n  if (options.patch) {\r\n    return patch(options.patch);\r\n  }\r\n  else {\r\n    return new Promise((resolve) => {\r\n      resolve();\r\n    });\r\n  }\r\n}\r\n\r\nfunction _load() : Promise<null> {\r\n  if (options.load) {\r\n    return load(options.load);\r\n  } else {\r\n    return new Promise((resolve) => {\r\n      resolve();\r\n    });\r\n  }\r\n}\r\n\r\nfunction _beforeFirstRender()  {\r\n  if (options.beforeFirstRender && is.Function(options.beforeFirstRender)) {\r\n    options.beforeFirstRender();\r\n  }\r\n}\r\n\r\nfunction _checkActiveCamera() {\r\n  if (is.String(options.activeCamera)) {\r\n    activateCamera(<string> options.activeCamera);\r\n  }\r\n  else {\r\n    if (is.Function(options.activeCamera)) {\r\n      try {\r\n        let camera = (<Function> options.activeCamera).call(global.scene);\r\n        activateCamera(camera.name);\r\n      }\r\n      catch (ex) {\r\n        console.error(\"_r.launch() error on activeCamera\", ex);\r\n      }\r\n    }\r\n    else {\r\n      if (is.Camera(options.activeCamera)) {\r\n        activateCamera(options.activeCamera.name);\r\n      }\r\n    }\r\n  }\r\n  if (!global.scene.activeCamera && global.scene.cameras.length > 0) {\r\n    activateCamera(global.scene.cameras[0].name);\r\n  }\r\n  if (global.scene.activeCamera && global.scene.activeCamera.inputs && !global.scene.activeCamera.inputs.attachedElement) {\r\n    global.scene.activeCamera.attachControl(global.canvas);\r\n  }\r\n}\r\n\r\nfunction loop() {\r\n  global.scene.render();\r\n}\r\n\r\nexport function start() {\r\n  global.engine.runRenderLoop(loop);\r\n}\r\n\r\nexport function pause() {\r\n  global.engine.stopRenderLoop(loop);\r\n}\r\n\r\nexport function ready(callback: Function) {\r\n  if (isReady) {\r\n    callback.call(global.scene);\r\n  }\r\n  else {\r\n    callbacks.push(callback);\r\n  }\r\n}","import { global } from \"./global.js\";\r\n\r\nfunction loop() {\r\n  global.scene.render();\r\n}\r\n\r\nexport function start() {\r\n  isStarted = true;\r\n  global.engine.runRenderLoop(loop);\r\n}\r\n\r\nexport function pause() {\r\n  isStarted = false;\r\n  global.engine.stopRenderLoop(loop);\r\n}\r\n\r\nexport let isStarted = false;","import { global } from \"../global.js\";\r\nimport { data } from \"../data.js\";\r\nimport { trigger } from \"./core.js\";\r\n\r\nexport const keys = [\r\n  'OnKeyDownTrigger',\r\n  'OnKeyUpTrigger'\r\n];\r\n\r\n// see https://api.jquery.com/category/events/keyboard-events/\r\nexport function onKeyEvent(event : string,  handler: (args: any) => void, repeat = true) {\r\n  if (!global.scene.actionManager) {\r\n    global.scene.actionManager = new BABYLON.ActionManager(global.scene);\r\n  }\r\n  let action = new BABYLON.ExecuteCodeAction(BABYLON.ActionManager[event], (evt) => {\r\n    trigger(global.scene, event, evt);\r\n  });\r\n  global.scene.actionManager.registerAction(action);\r\n  let events = data(global.scene, \"_r.e\");\r\n  if (!events) {\r\n    data(global.scene, \"_r.e\", []);\r\n    events =  data(global.scene, \"_r.e\");\r\n  }\r\n  if (!events[event]) {\r\n    events[event] = [];\r\n  }\r\n  events[event].push({\r\n    handler: handler,\r\n    repeat: repeat,\r\n    action: action\r\n  });\r\n}\r\n\r\nexport function oneKeyEvent(event : string, handler: (args: any) => void) {\r\n  onKeyEvent(event, handler, false);\r\n}\r\n\r\nexport function offKeyEvent(event : string, handler?: (args: any) => void) {\r\n  let events = data(global.scene, '_r.e');\r\n  if (events[event]) {\r\n    if (handler) {\r\n      events[event] = events[event].filter(function(_event) {\r\n        if (_event.handler.toString() == handler.toString()) {\r\n          if (_event.action) {\r\n            let index = global.scene.actionManager.actions.indexOf(_event.action);\r\n            global.scene.actionManager.actions.splice(index, 1);\r\n          }\r\n          if (_event.listener) {\r\n            global.scene.removeEventListener(_event, _event.listener);\r\n          }\r\n        }\r\n        return _event.handler.toString() !== handler.toString();\r\n      });\r\n    }\r\n    else {\r\n\r\n      events[event] = [];\r\n    }\r\n  }\r\n}","import { global } from \"../global.js\";\r\nimport { data } from \"../data.js\";\r\nimport { trigger } from \"./core.js\";\r\n\r\nexport const meshes = [\r\n  'OnDoublePickTrigger',\r\n  'OnPickTrigger',\r\n  'OnLeftPickTrigger',\r\n  'OnRightPickTrigger',\r\n  'OnCenterPickTrigger',\r\n  'OnPickDownTrigger',\r\n  'OnPickUpTrigger',\r\n  'OnPickOutTrigger',\r\n  'OnLongPressTrigger',\r\n  'OnPointerOverTrigger',\r\n  'OnPointerOutTrigger'\r\n];\r\n\r\nexport function onMesh(mesh: BABYLON.Mesh, event: string, handler: (args: any) => void, repeat = true) {\r\n  if (!mesh.actionManager) {\r\n    mesh.actionManager = new BABYLON.ActionManager(global.scene);\r\n  }\r\n  let action = new BABYLON.ExecuteCodeAction(BABYLON.ActionManager[event], function(evt) {\r\n    trigger(mesh, event, evt);\r\n  });\r\n  if (!mesh.actionManager.hasSpecificTrigger(BABYLON.ActionManager[event])) {\r\n    mesh.actionManager.registerAction(action);\r\n  }\r\n  let events = data(mesh, \"_r.e\");\r\n  if (!events) {\r\n    data(mesh, \"_r.e\", []);\r\n    events = data(mesh, \"_r.e\");\r\n  }\r\n  if (!events[event]) {\r\n    events[event] = [];\r\n  }\r\n  events[event].push({\r\n    handler: handler,\r\n    repeat: repeat,\r\n    action: action\r\n  });\r\n}\r\n\r\nexport function oneMesh(mesh: BABYLON.Mesh, event: string, handler: (args: any) => void) {\r\n  onMesh(mesh, event, handler, false);\r\n}\r\n\r\nexport function offMesh(mesh: BABYLON.Mesh, event: string, handler?: (args: any) => void) {\r\n  let events = data(mesh, '_r.e');\r\n  if (events && events[event]) {\r\n    if (handler) {\r\n      events[event] = events[event].filter(function(_event) {\r\n        if (_event.handler.toString() == handler.toString()) {\r\n          if (_event.action) {\r\n            let index = mesh.actionManager.actions.indexOf(_event.action);\r\n            mesh.actionManager.actions.splice(index, 1);\r\n          }\r\n          /** ??\r\n          if (_event.listener) {\r\n            mesh.removeEventListener(_event, _event.listener);\r\n          }**/\r\n        }\r\n        return _event.handler.toString() !== handler.toString();\r\n      });\r\n    }\r\n    else {\r\n      events[event] = [];\r\n    }\r\n  }\r\n}","import * as e from \"./core.js\";\r\nimport { keys, offKeyEvent, oneKeyEvent, onKeyEvent } from \"./keys.js\";\r\nimport { onMesh, oneMesh, offMesh, meshes } from \"./meshes.js\";\r\nimport { global } from \"../global.js\";\r\nimport { is } from \"../is.js\";\r\n\r\nexport function on(event: string, handler: (...args: any[]) => void, repeat = true) {\r\n  if (keys.indexOf(event) != -1) {\r\n    onKeyEvent(event, handler, repeat);\r\n  }\r\n  else {\r\n    e.on(this, event, handler, repeat);\r\n  }\r\n}\r\n\r\nexport function off(event: string, handler?: (...args: any[]) => void) {\r\n  if (keys.indexOf(event) != -1) {\r\n    offKeyEvent(event, handler);\r\n  }\r\n  else {\r\n    e.off(this, event, handler);\r\n  }\r\n}\r\n\r\nexport function one(event: string, handler: (...args: any[]) => void) {\r\n  if (keys.indexOf(event) != -1) {\r\n    oneKeyEvent(event, handler);\r\n  }\r\n  else {\r\n    e.one(this, event, handler);\r\n  }\r\n}\r\nexport function trigger(event: string, ...extraParameters: any[]) {\r\n  e.trigger(this, event, ...extraParameters);\r\n}\r\n\r\n/**\r\n * Attach an event handler function for one or more e to the selected elements.\r\n * @param events One or more space-separated event types\r\n * @param handler A handler function previously attached for the event(s)\r\n * @returns {Elements}\r\n */\r\nglobal.fn[\"on\"] = function(events : string, handler : (args : any) => void) {\r\n  this.each(function(item) {\r\n    if (is.Mesh(item) && meshes.indexOf(events) !== -1) {\r\n      onMesh(item, events, handler);\r\n    }\r\n    else {\r\n      e.on(item, events, handler);\r\n    }\r\n  });\r\n};\r\n\r\n/**\r\n * Attach a handler to an event for the elements. The handler is executed at most once per element per event type.\r\n * @param events One or more space-separated event types\r\n * @param handler A handler function previously attached for the event(s)\r\n * @returns {Elements}\r\n */\r\nglobal.fn[\"one\"] = function(events : string, handler : (args : any) => void) {\r\n  this.each(function(item) {\r\n    if (is.Mesh(item) && meshes.indexOf(events) !== -1) {\r\n      oneMesh(item, events, handler);\r\n    }\r\n    else {\r\n      e.one(item, events, handler);\r\n    }\r\n  });\r\n};\r\n\r\n/**\r\n * Remove an event handler that were attached with .on()\r\n * @param events\r\n * @param handler A handler function previously attached for the event(s) or null to remove all handler attached for the event(s)\r\n * @returns {Elements}\r\n */\r\nglobal.fn[\"off\"] = function(events : string, handler? : (args : any) => void) {\r\n  this.each(function(item) {\r\n    if (is.Mesh(item) && meshes.indexOf(events) !== -1) {\r\n      offMesh(item, events, handler);\r\n    }\r\n    else {\r\n      e.off(item, events, handler);\r\n    }\r\n  });\r\n};\r\n/**\r\n * Execute all handlers and behaviors attached to the matched elements for the given event type.\r\n * @param events One or more space-separated event types\r\n * @param extraParameters Additional parameters to pass along to the event handler.\r\n * @returns {Elements}\r\n */\r\nglobal.fn[\"trigger\"] = function(events : string, ...extraParameters : any[]) {\r\n  this.each(function(item) {\r\n    e.trigger(item, events, ...extraParameters);\r\n  });\r\n};","import { is } from '../is.js';\r\n\r\nexport function color(expr: any): BABYLON.Color3 | BABYLON.Color4 {\r\n  if (expr instanceof BABYLON.Color3 || expr instanceof BABYLON.Color4) {\r\n    return expr;\r\n  }\r\n  if (is.HexColor(expr)) {\r\n    return BABYLON.Color3.FromHexString(expr);\r\n  }\r\n  if (is.PlainObject(expr)) {\r\n    if (expr.hasOwnProperty(\"r\") || expr.hasOwnProperty(\"g\") || expr.hasOwnProperty(\"b\") || expr.hasOwnProperty(\"a\")) {\r\n      let r = expr[\"r\"] || 0;\r\n      let g = expr[\"g\"] || 0;\r\n      let b = expr[\"b\"] || 0;\r\n      if (expr[\"a\"]) {\r\n        return new BABYLON.Color4(r, g, b, expr[\"a\"]);\r\n      } else {\r\n        return new BABYLON.Color3(r, g, b);\r\n      }\r\n    } else {\r\n      console.error(\"_r.to.Color - invalid color : \", expr);\r\n      return new BABYLON.Color3(0, 0, 0);\r\n    }\r\n  }\r\n  if (is.Array(expr)) {\r\n    if (expr.length == 3) {\r\n      return BABYLON.Color3.FromArray(expr);\r\n    }\r\n    if (expr.length == 4) {\r\n      return BABYLON.Color4.FromArray(expr);\r\n    }\r\n    console.error(\"_r.to.Color - invalid color : \", expr);\r\n    return new BABYLON.Color3(0, 0, 0);\r\n  }\r\n  if (is.String(expr)) {\r\n    expr = expr.trim().toLocaleLowerCase();\r\n    if (expr.indexOf('rgb(') == 0) {\r\n      var rgb = expr.substring(expr.indexOf('(') + 1, expr.lastIndexOf(')')).split(/,\\s*/);\r\n\r\n      let r = parseFloat(rgb[0]);\r\n      let g = parseFloat(rgb[1]);\r\n      let b = parseFloat(rgb[2]);\r\n      return new BABYLON.Color3(!isNaN(r) ? (r / 255) : 0, !isNaN(g) ? (g / 255) : 0, !isNaN(b) ? (b / 255) : 0);\r\n    } else {\r\n      if (expr.indexOf('rgba(') == 0) {\r\n        var rgba = expr.substring(expr.indexOf('(') + 1, expr.lastIndexOf(')')).split(/,\\s*/);\r\n        let r = parseFloat(rgba[0]);\r\n        let g = parseFloat(rgba[1]);\r\n        let b = parseFloat(rgba[2]);\r\n        let a = parseFloat(rgba[3]);\r\n        return new BABYLON.Color4(!isNaN(r) ? (r / 255) : 0, !isNaN(g) ? (g / 255) : 0, !isNaN(b) ? (b / 255) : 0, !isNaN(a) ? (a / 255) : 0);\r\n      } else {\r\n        switch (expr) {\r\n          case 'red' :\r\n            return BABYLON.Color3.Red();\r\n          case 'green' :\r\n            return BABYLON.Color3.Green();\r\n          case 'blue' :\r\n            return BABYLON.Color3.Blue();\r\n          case 'black' :\r\n            return BABYLON.Color3.Black();\r\n          case 'white' :\r\n            return BABYLON.Color3.White();\r\n          case 'purple' :\r\n            return BABYLON.Color3.Purple();\r\n          case 'magenta' :\r\n          case 'pink' :\r\n            return BABYLON.Color3.Magenta();\r\n          case 'yellow' :\r\n            return BABYLON.Color3.Yellow();\r\n          case 'teal' :\r\n          case 'cyan' :\r\n            return BABYLON.Color3.Teal();\r\n          case 'gray' :\r\n          case 'grey' :\r\n            return BABYLON.Color3.Gray();\r\n          case 'random':\r\n            return BABYLON.Color3.Random();\r\n          default :\r\n            console.error(\"_r.to.Color - invalid color : \", expr);\r\n            return new BABYLON.Color3(0, 0, 0);\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport function color4(expr: any) : BABYLON.Color4 {\r\n  let _color = color(expr);\r\n  return new BABYLON.Color4(_color.r, _color.g, _color.b, 1);\r\n}","import { registerPlugin } from \"../patchPlugin.js\";\r\nimport { color } from \"../../util/color.js\";\r\nimport { is } from \"../../is.js\";\r\n\r\nregisterPlugin({\r\n  test(element, source, property) : boolean {\r\n    return !is.Function(source[property]) && element[property] instanceof BABYLON.Color3 || element[property] instanceof BABYLON.Color4;\r\n  },\r\n  resolve(element, source, property) {\r\n    element[property] = color(source[property]);\r\n    return element[property];\r\n  }\r\n});\r\n","import { registerPlugin } from \"../patchPlugin.js\";\r\nimport { patch, patchElements, patchElement } from \"../patch.js\";\r\nimport { is } from \"../../is.js\";\r\nimport { select } from \"../../select.js\";\r\n\r\nregisterPlugin({\r\n  test(element, source, property) : boolean {\r\n    return property === \"forEach\" || property === \"*\" || property === \"each\";\r\n  },\r\n  resolve(element, source, property, context) {\r\n    //console.log(\"here is the context\", property, context)\r\n    //context.pop();\r\n    let keyword;\r\n    if (source[\"forEach\"]) {\r\n      keyword = \"forEach\";\r\n    }\r\n    else {\r\n      if (source[\"*\"]) {\r\n        keyword = \"*\";\r\n      }\r\n      else {\r\n        if (source[\"each\"]) {\r\n          keyword = \"each\";\r\n        }\r\n      }\r\n    }\r\n    let promises = [];\r\n    if (is.Array(element)) {\r\n      element.forEach((item) => {\r\n        // clone context\r\n        let _context = context.slice();\r\n        _context.push(item);\r\n        promises.push(patchElement(item, source[keyword], _context));\r\n      });\r\n    }\r\n    // Here Promises are parallel :/\r\n    return Promise.all(promises);\r\n  }\r\n});\r\n","import { registerPlugin } from \"../patchPlugin.js\";\r\n\r\nregisterPlugin({\r\n  test(element, source, property) : boolean {\r\n    return [\"diffuseFresnelParameters\", \"opacityFresnelParameters\", \"emissiveFresnelParameters\", \"refractionFresnelParameters\", \"reflectionFresnelParameters\"].indexOf(property) !== -1\r\n      && !element.target[property];\r\n  },\r\n  resolve(element, source, property) {\r\n    return new BABYLON.FresnelParameters();\r\n  }\r\n});","import { registerPlugin } from \"../patchPlugin.js\";\r\nimport { is } from \"../../is.js\";\r\nimport { global } from \"../../global.js\";\r\n\r\nregisterPlugin({\r\n  test(element, source, property) : boolean {\r\n    return property === \"execute\" || property === \"exec\";\r\n  },\r\n  resolve(element, source, property, context) {\r\n    try {\r\n      let func = source[property];\r\n      if (element) {\r\n        return func.apply(element, context);\r\n      }\r\n      else {\r\n        return func.apply(global.scene, context);\r\n      }\r\n    }\r\n    catch (ex) {\r\n      console.error(ex);\r\n    }\r\n  }\r\n});","import { registerPlugin } from \"../patchPlugin.js\";\r\nimport { is } from \"../../is.js\";\r\nimport { global } from \"../../global.js\";\r\nimport { patchElement } from \"../patchElement.js\";\r\n\r\nregisterPlugin({\r\n  test(element, source, property) : boolean {\r\n    return property === \"scene\";\r\n  },\r\n  resolve(element, source, property) {\r\n    if (is.Function(source[property])) {\r\n      try {\r\n       global.scene = source[property]();\r\n      }\r\n      catch (ex) {\r\n        console.error(ex);\r\n      }\r\n    }\r\n    else {\r\n      return patchElement(global.scene, source[property]);\r\n    }\r\n  }\r\n});","import { registerPlugin } from \"../patchPlugin.js\";\r\nimport { is } from \"../../is.js\";\r\nimport { global } from \"../../global.js\";\r\nimport { globalPatch } from \"../patchElement.js\";\r\nimport { select } from \"../../select.js\";\r\n\r\nregisterPlugin({\r\n  test(element, source, property) : boolean {\r\n    return property === \"data\";\r\n  },\r\n  resolve(element, source, property, context) {\r\n    let data = source[property];\r\n    let properties = Object.getOwnPropertyNames(data);\r\n    let x = {};\r\n    properties.forEach((property) => {\r\n      let _patch = data[property];\r\n      if (is.Function(_patch)) {\r\n        x[property] = function() {\r\n          return _patch.apply(element, context);\r\n        };\r\n        select(element).data(property, x[property]);\r\n      }\r\n      else {\r\n        x[property] = _patch;\r\n        select(element).data(property, _patch);\r\n      }\r\n    });\r\n  }\r\n});","import { registerPlugin } from \"../patchPlugin.js\";\r\nimport { is } from \"../../is.js\";\r\nimport { global } from \"../../global.js\";\r\nimport { globalPatch } from \"../patchElement.js\";\r\nimport { select } from \"../../select.js\";\r\n\r\nregisterPlugin({\r\n  test(element, source, property) : boolean {\r\n    return [\"on\", \"off\", \"trigger\", \"one\"].indexOf(property) != -1;\r\n  },\r\n  resolve(element, source, property, context) {\r\n    switch (property) {\r\n      case \"on\" :\r\n        Object.getOwnPropertyNames(source[property]).forEach(function(event) {\r\n          let handler = source[property][event];\r\n          if (is.Function(handler)) {\r\n            return select(element).on(event, handler);\r\n          }\r\n          else {\r\n            select(element).on(event, function() {\r\n              return select(element).patch(source[property][event]);\r\n            });\r\n          }\r\n        });\r\n        break;\r\n      case \"off\" :\r\n        if (is.String(source[property])) {\r\n          return select(element).off(source[property]);\r\n        }\r\n        else {\r\n          Object.getOwnPropertyNames(source[property]).forEach(function(event) {\r\n            select(element).off(event, source[property][event]);\r\n          });\r\n        }\r\n        break;\r\n      case \"trigger\" :\r\n        if (is.String(source[property])) {\r\n            return select(element).trigger(source[property]);\r\n        }\r\n        else {\r\n          Object.getOwnPropertyNames(source[property]).forEach(function(event) {\r\n            return select(element).trigger(event, source[property][event]);\r\n          });\r\n        }\r\n        break;\r\n      case \"one\":\r\n        Object.getOwnPropertyNames(source[property]).forEach(function(event) {\r\n          let handler = source[property][event];\r\n          if (is.Function(handler)) {\r\n            return select(element).one(event, handler);\r\n          }\r\n          else {\r\n            select(element).one(event, function() {\r\n              return select(element).patch(source[property][event]);\r\n            });\r\n          }\r\n        });\r\n        break;\r\n    }\r\n  }\r\n});","import { registerPlugin } from \"../patchPlugin.js\";\r\nimport { is } from \"../../is.js\";\r\nimport { global } from \"../../global.js\";\r\nimport { select } from \"../../select.js\";\r\n\r\nregisterPlugin({\r\n  test(element, source, property) : boolean {\r\n    return false;\r\n    //return source[property] && is.String(source[property]) && (is.Material(element) || is.Texture(element));\r\n  },\r\n  resolve(element, source, property, context) {\r\n    /**\r\n    if (is.Material(element)) {\r\n      let elements = select(source[property] + ':material');\r\n      if (elements.length != 0) {\r\n        element = elements[0];\r\n      }\r\n    }\r\n    if (is.Texture(element)) {\r\n      let elements = select(source[property] + ':texture');\r\n      if (elements.length != 0) {\r\n        element = elements[0];\r\n      }\r\n    }**/\r\n  }\r\n});","import { registerPlugin } from \"../patchPlugin.js\";\r\nimport { is } from \"../../is.js\";\r\nimport { global } from \"../../global.js\";\r\nimport { patch } from \"../patch.js\";\r\nimport { select } from \"../../select.js\";\r\nregisterPlugin({\r\n  test(element, source, property) : boolean {\r\n    return property === \"patchParallel\";\r\n  },\r\n  resolve(element, source, property, context) {\r\n    let promises = [];\r\n    if (element) {\r\n      source[property].forEach((_patch) => {\r\n        promises.push(select(element).patch(_patch));\r\n      });\r\n    }\r\n    else {\r\n      source[property].forEach((_patch) => {\r\n        promises.push(patch(_patch));\r\n      });\r\n    }\r\n    return Promise.all(promises);\r\n  }\r\n});","import { is } from \"./is.js\";\r\nimport { select } from \"./select.js\";\r\nimport { extend } from \"./util/extend.js\";\r\nimport { color } from \"./util/color.js\";\r\nimport { patch } from \"./patch/patch.js\";\r\nimport { global } from \"./global.js\";\r\n\r\nfunction getEasingFunction(easing: string): BABYLON.EasingFunction {\r\n  let mode;\r\n  // rtec\r\n  let func;\r\n  if (easing.indexOf(\"easeInOut\") != -1) {\r\n    mode = BABYLON.EasingFunction.EASINGMODE_EASEINOUT;\r\n    func = easing.replace(\"easeInOut\", \"\");\r\n  } else {\r\n    if (easing.indexOf(\"easeIn\") != -1) {\r\n      mode = BABYLON.EasingFunction.EASINGMODE_EASEIN;\r\n      func = easing.replace(\"easeIn\", \"\");\r\n    } else {\r\n      if (easing.indexOf(\"easeOut\") != -1) {\r\n        mode = BABYLON.EasingFunction.EASINGMODE_EASEOUT;\r\n        func = easing.replace(\"easeOut\", \"\");\r\n      } else {\r\n        console.warn(\"_r.animate - unrecognized easing function : \" + easing + '. Please use something from https://easings.net/');\r\n        return null;\r\n      }\r\n    }\r\n  }\r\n  let easingFunction;\r\n  switch (func) {\r\n    case \"Sine\":\r\n      easingFunction = new BABYLON.SineEase();\r\n      easingFunction.setEasingMode(mode);\r\n      return easingFunction;\r\n    case \"Quad\":\r\n      easingFunction = new BABYLON.QuadraticEase();\r\n      easingFunction.setEasingMode(mode);\r\n      return easingFunction;\r\n    case \"Cubic\":\r\n      easingFunction = new BABYLON.CubicEase();\r\n      easingFunction.setEasingMode(mode);\r\n      return easingFunction;\r\n    case \"Quart\":\r\n      easingFunction = new BABYLON.QuarticEase();\r\n      easingFunction.setEasingMode(mode);\r\n      return easingFunction;\r\n    case \"Quint\":\r\n      easingFunction = new BABYLON.QuinticEase();\r\n      easingFunction.setEasingMode(mode);\r\n      return easingFunction;\r\n    case \"Expo\" :\r\n      easingFunction = new BABYLON.ExponentialEase();\r\n      easingFunction.setEasingMode(mode);\r\n      return easingFunction;\r\n    case \"Circ\":\r\n      easingFunction = new BABYLON.CircleEase();\r\n      easingFunction.setEasingMode(mode);\r\n      return easingFunction;\r\n    case \"Back\":\r\n      easingFunction = new BABYLON.BackEase();\r\n      easingFunction.setEasingMode(mode);\r\n      return easingFunction;\r\n    case \"Elastic\":\r\n      easingFunction = new BABYLON.ElasticEase();\r\n      easingFunction.setEasingMode(mode);\r\n      return easingFunction;\r\n    case \"Bounce\":\r\n      easingFunction = new BABYLON.BounceEase();\r\n      easingFunction.setEasingMode(mode);\r\n      return easingFunction;\r\n    default:\r\n      console.warn(\"_r.animate - unrecognized easing function \" + easing + '.Please use something from https://easings.net/');\r\n      return null;\r\n  }\r\n}\r\n\r\nfunction getLoopMode(options : IAnimationOptions): number {\r\n  if (is.Boolean(options.loop)) {\r\n    if (options.loop) {\r\n      return BABYLON.Animation.ANIMATIONLOOPMODE_CONSTANT;\r\n    }\r\n  }\r\n  if (is.String(options.loop)) {\r\n    if ((<string> options.loop).toLowerCase() == \"cycle\") {\r\n      return BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE;\r\n    }\r\n    if ((<string>options.loop).toLocaleLowerCase() == \"relative\" || (<string>this.loop).toLocaleLowerCase() == \"pingpong\") {\r\n      return BABYLON.Animation.ANIMATIONLOOPMODE_RELATIVE;\r\n    }\r\n  } else {\r\n    if (is.Number(options.loop)) {\r\n      return <number>options.loop;\r\n    }\r\n  }\r\n  return BABYLON.Animation.ANIMATIONLOOPMODE_CONSTANT;\r\n}\r\n\r\nfunction getAnimationType(element, property) : number {\r\n  if (is.Vector2(element[property])) {\r\n    return BABYLON.Animation.ANIMATIONTYPE_VECTOR2;\r\n  }\r\n  if (is.Vector3(element[property])) {\r\n    return BABYLON.Animation.ANIMATIONTYPE_VECTOR3;\r\n  }\r\n  if (is.Number(element[property])) {\r\n    return BABYLON.Animation.ANIMATIONTYPE_FLOAT;\r\n  }\r\n  if (is.Color(element[property])) {\r\n    return BABYLON.Animation.ANIMATIONTYPE_COLOR3;\r\n  }\r\n  if (is.Quaternion(element[property])) {\r\n    return BABYLON.Animation.ANIMATIONTYPE_QUATERNION;\r\n  }\r\n  if (is.Matrix(element[property])) {\r\n    return BABYLON.Animation.ANIMATIONTYPE_MATRIX;\r\n  }\r\n  if (is.Size(element[property])) {\r\n    return BABYLON.Animation.ANIMATIONTYPE_SIZE;\r\n  }\r\n  return null;\r\n}\r\n\r\nfunction isAnimatable(element, property) {\r\n  return getAnimationType(element, property) !== null;\r\n}\r\n\r\nfunction getKeys(element, property, newValue, options) {\r\n  if (options.keys) {\r\n    return options.keys;\r\n  }\r\n  let initial = element[property];\r\n  let final;\r\n  switch (getAnimationType(element, property)) {\r\n    case BABYLON.Animation.ANIMATIONTYPE_COLOR3:\r\n      final = initial.clone();\r\n      select(final).patch(color(newValue));\r\n      break;\r\n    case BABYLON.Animation.ANIMATIONTYPE_FLOAT:\r\n      final = newValue;\r\n      break;\r\n    case BABYLON.Animation.ANIMATIONTYPE_MATRIX:\r\n      final = initial.clone();\r\n      select(final).patch(newValue);\r\n      break;\r\n    default:\r\n      final = initial.clone();\r\n      let properties = Object.getOwnPropertyNames(newValue);\r\n      properties.forEach((property) => {\r\n        final[property] = newValue[property];\r\n      });\r\n      break;\r\n  }\r\n  return [\r\n    {\r\n      frame: 0,\r\n      value: initial\r\n    },\r\n    {\r\n      frame: options.fps * options.duration,\r\n      value: final\r\n    }\r\n  ];\r\n}\r\n\r\nfunction getAnimationsForElement(element : any, patch : any, options : IAnimationOptions) : Array<BABYLON.Animation> {\r\n  let animations = [];\r\n  let properties = Object.getOwnPropertyNames(patch);\r\n  if (!element.animations) {\r\n    element.animations = [];\r\n  }\r\n  properties.forEach((property) => {\r\n    if (!isAnimatable(element, property)) {\r\n      console.error(property + \" is not animatable\");\r\n    }\r\n    else {\r\n      let animation = new BABYLON.Animation(\"_r.animation\" + element.animations.length, property, options.fps, getAnimationType(element, property), getLoopMode(options));\r\n      let keys = getKeys(element, property, patch[property], options);\r\n      animation.setKeys(keys);\r\n      if (options.easing) {\r\n        animation.setEasingFunction(getEasingFunction(options.easing));\r\n      }\r\n      // element.animations.push(animation);\r\n      animations.push(animation);\r\n    }\r\n  });\r\n  return animations;\r\n}\r\n\r\nfunction findSomethingToAnimate(element : any, patch : any) {\r\n  let properties = Object.getOwnPropertyNames(patch);\r\n  let animatables = [];\r\n  properties.forEach((property) => {\r\n    if (isAnimatable(element, property)) {\r\n      animatables.push({\r\n        element : element,\r\n        property : property,\r\n        patch : patch[property]\r\n      });\r\n    }\r\n    else {\r\n      if (!is.Primitive(patch[property])) {\r\n        let _animatables = findSomethingToAnimate(element[property], patch[property]);\r\n        animatables = animatables.concat(_animatables);\r\n      }\r\n      else {\r\n        return [];\r\n      }\r\n    }\r\n  });\r\n  return animatables;\r\n}\r\n\r\nexport interface IAnimationOptions {\r\n  fps?: number;\r\n  duration?: number;\r\n  speedRatio?: number;\r\n  from?: number;\r\n  to?: number;\r\n  loop?: boolean | string | number;\r\n  easing?: string;\r\n  complete?: () => void;\r\n  keys? : [];\r\n}\r\n\r\nconst defaultOptions = {\r\n  fps : 30,\r\n  duration : 0.4,\r\n  speedRatio : 1,\r\n  loopMode : false\r\n};\r\n\r\nfunction getOptions(options? : number | IAnimationOptions) {\r\n  let _options : IAnimationOptions = {};\r\n  if (!options) {\r\n    options = 0.4;\r\n  }\r\n  if (is.Number(options)) {\r\n    _options.duration = <number> options;\r\n    _options.loop = false;\r\n  }\r\n  else {\r\n    _options = <IAnimationOptions> options;\r\n    if (_options.loop) {\r\n      if (is.Boolean(_options.loop) && _options.loop) {\r\n        _options.loop = 'cycle';\r\n      }\r\n    }\r\n    else {\r\n      _options.loop = false;\r\n    }\r\n  }\r\n  _options = extend({}, defaultOptions, _options);\r\n  return _options;\r\n}\r\n\r\nlet count = 0;\r\n\r\nexport function animate(elements : any, patch : any, options? : number | IAnimationOptions) : BABYLON.AnimationGroup {\r\n  let _elements = select(elements);\r\n  let _options  = getOptions(options);\r\n  let group = new BABYLON.AnimationGroup(\"_r.animate.AnimationsGroup\" + count++);\r\n  _elements.each((item) => {\r\n    let _animatables = findSomethingToAnimate(item, patch);\r\n    _animatables.forEach((animatable) => {\r\n      let _element = animatable.element;\r\n      let _patch = {};\r\n      _patch[animatable.property] = animatable.patch;\r\n      let animations = getAnimationsForElement(_element, _patch, _options);\r\n      animations.forEach((animation) => {\r\n        group.addTargetedAnimation(animation, _element);\r\n      });\r\n    });\r\n  });\r\n  group.speedRatio = _options.speedRatio;\r\n  if (_options.complete) {\r\n    group.onAnimationGroupEndObservable.add(_options.complete);\r\n  }\r\n  group.onAnimationEndObservable.add((targetedAnimation) => {\r\n    let index = targetedAnimation.target.animations.indexOf(targetedAnimation.animation);\r\n    targetedAnimation.target.animations = targetedAnimation.target.animations.splice(index, 1);\r\n  });\r\n  if (_options.loop != false) {\r\n    group.play(true);\r\n  }\r\n  else {\r\n    group.play();\r\n  }\r\n\r\n  return group;\r\n}\r\n\r\nglobal.fn[\"animate\"] = function(patch : any, options? : number | IAnimationOptions) {\r\n  return animate(this.toArray(), patch, options);\r\n};\r\n\r\nglobal.fn[\"fadeOut\"] = function(options? : number | IAnimationOptions) {\r\n  let _options  = getOptions(options);\r\n  let group = new BABYLON.AnimationGroup(\"_r.animate.AnimationsGroup\" + count++);\r\n  this.each((item) => {\r\n    let animations = [];\r\n    if (is.Mesh(item)) {\r\n      animations = getAnimationsForElement(item, {\r\n        visibility : 0\r\n      }, _options);\r\n    }\r\n    if (is.Material(item)) {\r\n      animations = getAnimationsForElement(item, {\r\n        alpha : 0\r\n      }, _options);\r\n    }\r\n    if (is.Texture(item)) {\r\n      animations = getAnimationsForElement(item, {\r\n        level : 0\r\n      }, _options);\r\n    }\r\n    if (is.Light(item)) {\r\n      animations = getAnimationsForElement(item, {\r\n        intensity : 0\r\n      }, _options);\r\n    }\r\n    animations.forEach((animation) => {\r\n      group.addTargetedAnimation(animation, item);\r\n    });\r\n  });\r\n  group.speedRatio = _options.speedRatio;\r\n  if (_options.complete) {\r\n    group.onAnimationGroupEndObservable.add(_options.complete);\r\n  }\r\n  group.play();\r\n  return group;\r\n};\r\n\r\nglobal.fn[\"fadeIn\"] = function(options?) {\r\n  let _options  = getOptions(options);\r\n  let group = new BABYLON.AnimationGroup(\"_r.animate.AnimationsGroup\" + count++);\r\n  this.each((item) => {\r\n    let animations = [];\r\n    if (is.Mesh(item)) {\r\n      animations = getAnimationsForElement(item, {\r\n        visibility : 1\r\n      }, _options);\r\n    }\r\n    if (is.Material(item)) {\r\n      animations = getAnimationsForElement(item, {\r\n        alpha : 1\r\n      }, _options);\r\n    }\r\n    if (is.Texture(item)) {\r\n      animations = getAnimationsForElement(item, {\r\n        level : 1\r\n      }, _options);\r\n    }\r\n    if (is.Light(item)) {\r\n      animations = getAnimationsForElement(item, {\r\n        intensity : 1\r\n      }, _options);\r\n    }\r\n    animations.forEach((animation) => {\r\n      group.addTargetedAnimation(animation, item);\r\n    });\r\n  });\r\n  group.speedRatio = _options.speedRatio;\r\n  if (_options.complete) {\r\n    group.onAnimationGroupEndObservable.add(_options.complete);\r\n  }\r\n  group.play();\r\n  return group;\r\n};\r\n\r\n/**\r\n * Stop the currently-running animation, remove all queued animations, and complete all animations for the matched elements.\r\n */\r\nglobal.fn[\"finish\"] = function() {\r\n  this.each((item) => {\r\n    let animatables = global.scene.getAllAnimatablesByTarget(item);\r\n    animatables.forEach((animatable) => {\r\n      animatable.stop();\r\n    });\r\n    item.animations = [];\r\n  });\r\n};","import { global } from \"../global.js\";\r\nimport { data } from \"../data.js\";\r\nimport { select } from \"../select.js\";\r\nimport { is } from \"../is.js\";\r\nimport { color } from \"../util/color.js\";\r\n\r\n// from https://doc.babylonjs.com/snippets/normals\r\nfunction showMeshNormals(mesh, size, _color) {\r\n  hideMeshNormals(mesh);\r\n  let normals = mesh.getVerticesData(BABYLON.VertexBuffer.NormalKind);\r\n  let positions = mesh.getVerticesData(BABYLON.VertexBuffer.PositionKind);\r\n  _color = color(_color);\r\n  size = size || 1;\r\n\r\n  let lines = [];\r\n  for (var i = 0; i < normals.length; i += 3) {\r\n    var v1 = BABYLON.Vector3.FromArray(positions, i);\r\n    var v2 = v1.add(BABYLON.Vector3.FromArray(normals, i).scaleInPlace(size));\r\n    lines.push([v1.add(mesh.position), v2.add(mesh.position)]);\r\n  }\r\n  var normalLines = BABYLON.MeshBuilder.CreateLineSystem(\"_r.normals.\" + mesh.uniqueId, {lines: lines}, global.scene);\r\n  normalLines.color = _color;\r\n  data(mesh, '_r.normals', normalLines);\r\n  return normalLines;\r\n}\r\n\r\nfunction hideMeshNormals(mesh) {\r\n  let normalLines = data(mesh, '_r.normals');\r\n  if (normalLines) {\r\n    normalLines.dispose();\r\n  }\r\n}\r\n\r\nexport function showNormals(selector? : string, size = 1, color = \"red\") {\r\n  if (selector) {\r\n    select(selector).each((item) => {\r\n      if (is.Mesh(item)) {\r\n        showMeshNormals(item, size, color);\r\n      }\r\n    });\r\n  }\r\n  else {\r\n    global.scene.meshes.forEach((mesh) => {\r\n      showMeshNormals(mesh, size, color);\r\n    });\r\n  }\r\n}\r\n\r\nexport function hideNormals(selector? : string) {\r\n  if (selector) {\r\n    select(selector).each((item) => {\r\n      if (is.Mesh(item)) {\r\n        hideMeshNormals(item);\r\n      }\r\n    });\r\n  }\r\n  else {\r\n    global.scene.meshes.forEach((mesh) => {\r\n      hideMeshNormals(mesh);\r\n    });\r\n  }\r\n}","import { select } from \"../select.js\";\r\nimport { is } from \"../is.js\";\r\nimport { global } from \"../global.js\";\r\nimport { color } from \"../util/color.js\";\r\n\r\nfunction showMeshWireframe(mesh, epsilon, width , color) {\r\n  if (mesh.edgesRenderer == undefined) {\r\n    mesh.enableEdgesRendering(epsilon);\r\n    mesh.edgesColor = color;\r\n    mesh.edgesWidth = width;\r\n  } else {\r\n    mesh.enableEdgesRendering(epsilon);\r\n    mesh.edgesColor = color;\r\n    mesh.edgesWidth = width;\r\n    mesh.edgesRenderer.isEnabled = true;\r\n  }\r\n}\r\n\r\nfunction hideMeshWireframe(mesh) {\r\n  if (mesh.edgesRenderer) {\r\n    mesh.edgesRenderer.isEnabled = false;\r\n  }\r\n}\r\n\r\nexport function showWireframe(selector? : string,  epsilon = 1, width = 1, _color =  new BABYLON.Color4(130 / 255, 230 / 255, 1, 0.85)) {\r\n  if (selector) {\r\n    select(selector).each((item) => {\r\n      if (is.Mesh(item)) {\r\n        showMeshWireframe(item, epsilon, width, color(_color));\r\n      }\r\n    });\r\n  }\r\n  else {\r\n    global.scene.meshes.forEach((mesh) => {\r\n      showMeshWireframe(mesh, epsilon, width, color(_color));\r\n    });\r\n  }\r\n}\r\n\r\nexport function hideWireframe(selector? : string) {\r\n  if (selector) {\r\n    select(selector).each((item) => {\r\n      if (is.Mesh(item)) {\r\n        hideMeshWireframe(item);\r\n      }\r\n    });\r\n  }\r\n  else {\r\n    global.scene.meshes.forEach((mesh) => {\r\n      hideMeshWireframe(mesh);\r\n    });\r\n  }\r\n}","import { select } from \"../select.js\";\r\nimport { is } from \"../is.js\";\r\nimport { global } from \"../global.js\";\r\n\r\n// Create utility layer the gizmo will be rendered on\r\nlet utilLayer;\r\n\r\nfunction initUtilLayer() {\r\n    if (!utilLayer) {\r\n        utilLayer = new BABYLON.UtilityLayerRenderer(global.scene);\r\n    }\r\n}\r\n\r\nfunction showMeshGizmo(mesh: BABYLON.Mesh, gizmoType?: string, axis?: string, color?: BABYLON.Color3) : BABYLON.Gizmo {\r\n    let gizmo;\r\n    gizmoType = (typeof gizmoType === 'string') ? gizmoType.toLowerCase() : gizmoType;\r\n    axis = (typeof axis === 'string') ? axis.toLowerCase() : axis;\r\n    hideMeshGizmo(mesh);\r\n    switch (gizmoType) {\r\n        case 'position':\r\n            gizmo = new BABYLON.PositionGizmo(utilLayer);\r\n            break;\r\n        case 'rotation':\r\n            gizmo = new BABYLON.RotationGizmo(utilLayer);\r\n            break;\r\n        case 'scale':\r\n            gizmo = new BABYLON.ScaleGizmo(utilLayer);\r\n            break;\r\n        case 'boundingbox':\r\n        default:\r\n            gizmo = new BABYLON.BoundingBoxGizmo(color, utilLayer);\r\n            break;\r\n    }\r\n    gizmo.attachedMesh = mesh;\r\n    if (axis && gizmo.xGizmo) {\r\n        console.info('_r : gizmo axis works only with BABYLON > 4.0.3, actual is: ' + BABYLON.Engine.Version);\r\n        gizmo.xGizmo.isEnabled = axis.indexOf('x') !== -1;\r\n        gizmo.yGizmo.isEnabled = axis.indexOf('y') !== -1;\r\n        gizmo.zGizmo.isEnabled = axis.indexOf('z') !== -1;\r\n        // Keep the gizmo fixed to world rotation\r\n        gizmo.updateGizmoRotationToMatchAttachedMesh = false;\r\n        gizmo.updateGizmoPositionToMatchAttachedMesh = true;\r\n    }\r\n    select(mesh).data('runtime-gizmo', gizmo);\r\n    return gizmo;\r\n}\r\n\r\nfunction hideMeshGizmo(mesh: BABYLON.Mesh) {\r\n    let gizmo = select(mesh).data('runtime-gizmo');\r\n    if (gizmo) {\r\n        gizmo.dispose();\r\n        select(mesh).data('runtime-gizmo', null);\r\n    }\r\n}\r\n\r\nexport function showGizmo(selector? : string, gizmoType?: string, axis?: string, _color =  new BABYLON.Color3(130 / 255, 230 / 255, 1)) : BABYLON.Gizmo[] {\r\n    let result = [];\r\n    initUtilLayer();\r\n    if (selector) {\r\n        select(selector).each((item) => {\r\n            if (is.Mesh(item)) {\r\n                result.push(showMeshGizmo(item, gizmoType, axis, _color));\r\n            }\r\n        });\r\n    }\r\n    else {\r\n        global.scene.meshes.forEach((mesh) => {\r\n            result.push(showMeshGizmo(mesh, gizmoType, axis, _color));\r\n        });\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function hideGizmo(selector? : string) {\r\n    if (selector) {\r\n        select(selector).each((item) => {\r\n            if (is.Mesh(item)) {\r\n                hideMeshGizmo(item);\r\n            }\r\n        });\r\n    }\r\n    else {\r\n        global.scene.meshes.forEach((mesh) => {\r\n            hideMeshGizmo(mesh);\r\n        });\r\n    }\r\n}\r\n","import { showNormals, hideNormals } from \"./normals.js\";\r\nimport { showWireframe, hideWireframe } from \"./wireframe.js\";\r\nimport { showGizmo, hideGizmo } from \"./gizmo.js\";\r\n\r\nexport function show(params : string, selector? : string) {\r\n  let split = params.split(',');\r\n  split.forEach((param) => {\r\n    switch (param.trim()) {\r\n      case \"normals\" :\r\n        showNormals(selector);\r\n        break;\r\n      case \"wireframe\":\r\n        showWireframe(selector);\r\n        break;\r\n      case \"gizmo\":\r\n        showGizmo(selector);\r\n        break;\r\n      default:\r\n        console.error(param + \" is not supported by _r.show\");\r\n    }\r\n  });\r\n}\r\n\r\nexport function hide(params : string, selector? : string) {\r\n  let split = params.split(',');\r\n  split.forEach((param) => {\r\n    switch (param.trim()) {\r\n      case \"normals\" :\r\n        hideNormals(selector);\r\n        break;\r\n      case \"wireframe\":\r\n        hideWireframe(selector);\r\n        break;\r\n      case \"gizmo\":\r\n        hideGizmo(selector);\r\n        break;\r\n      default :\r\n        console.error(param + \" is not supported by _r.hide\");\r\n    }\r\n  });\r\n}\r\n\r\nexport namespace show {\r\n  export let normals = showNormals;\r\n  export let wireframe = showWireframe;\r\n  export let gizmo = showGizmo;\r\n}\r\n\r\nexport namespace hide{\r\n  export let normals = hideNormals;\r\n  export let wireframe = hideWireframe;\r\n  export let gizmo = hideGizmo;\r\n}\r\n","import { off, on, one, trigger } from \"../events/core.js\";\r\nimport { is } from \"../is.js\";\r\n\r\nexport let router = {\r\n  hashChangedListener : [],\r\n  set : function(hash : string) {\r\n    window.location.hash = hash;\r\n  },\r\n  get : function() {\r\n    if (window.location.hash.length > 1) {\r\n      return window.location.hash.substr(1);\r\n    }\r\n  },\r\n  on : function(event: string | Function, handler?: (...args: any[]) => void, repeat = true) {\r\n    if (is.Function(event)) {\r\n      this.hashChangedListener.push(event);\r\n    }\r\n    else {\r\n      on(this, <string> event, handler, repeat);\r\n    }\r\n  },\r\n  off : function(event: string, handler?: (...args: any[]) => void) {\r\n    off(this, event, handler);\r\n  },\r\n  one : function(event: string, handler: (...args: any[]) => void) {\r\n    one(this, event, handler);\r\n  },\r\n  trigger : function(event: string, extraParameters?: any) {\r\n    if (!this.pause) {\r\n      this.hashChangedListener.forEach((listener) => {\r\n        listener(event);\r\n      });\r\n      trigger(this, event, extraParameters);\r\n    }\r\n  },\r\n  pause : false\r\n};\r\n\r\nfunction hashChangeListener(evt) {\r\n  router.trigger(router.get());\r\n}\r\n\r\nwindow.addEventListener(\"hashchange\", hashChangeListener);","import { extend } from \"./extend.js\";\r\n\r\nexport function merge(target: any, source: any, excluded?: Array<string>): any {\r\n  var others = {};\r\n  Object.getOwnPropertyNames(source).forEach(function(property) {\r\n    if (!excluded || excluded.indexOf(property) == -1) {\r\n      others[property] = source[property];\r\n    }\r\n  });\r\n  target = extend(target, others);\r\n  return target;\r\n}","import { global } from \"../global.js\";\r\nimport { is } from \"../is.js\";\r\n\r\nglobal.fn['freeze'] = function() {\r\n  this.forEach((item) => {\r\n    if (is.Mesh(item)) {\r\n      item.freezeWorldMatrix();\r\n    }\r\n    if (is.Material(item)) {\r\n      item.freeze();\r\n    }\r\n  });\r\n};\r\n\r\nglobal.fn['unfreeze'] = function() {\r\n  this.forEach((item) => {\r\n    if (is.Mesh(item)) {\r\n      item.unfreezeWorldMatrix();\r\n    }\r\n    if (is.Material(item)) {\r\n      item.unfreeze();\r\n    }\r\n  });\r\n};","import { queryString } from \"./util/queryString.js\";\r\nimport { global } from \"./global.js\";\r\nimport { is } from \"./is.js\";\r\nimport { launch, ready } from \"./launch.js\";\r\nimport { start, pause } from \"./renderLoop.js\";\r\nimport { select } from \"./select.js\";\r\nimport { data } from \"./data.js\";\r\nimport { on, off, one, trigger } from \"./events/index.js\";\r\nimport { patch } from \"./patch/patch.js\";\r\nimport \"./patch/plugins/index.js\";\r\nimport { match } from \"./Elements.js\";\r\nimport { color, color4 } from './util/color.js';\r\nimport { animate } from \"./animate.js\";\r\nimport { activateCamera } from \"./activateCamera.js\";\r\nimport { show, hide } from \"./show.hide/index.js\";\r\nimport { loadingScreen } from \"./util/loadingScreen.js\";\r\nimport { router } from \"./util/router.js\";\r\nimport { extend } from \"./util/extend.js\";\r\nimport { merge } from \"./util/merge.js\";\r\nimport { load } from \"./load.js\";\r\nimport './util/freeze.js';\r\n\r\nexport default {\r\n    get canvas() {\r\n        return global.canvas;\r\n    },\r\n    set canvas(value) {\r\n        global.canvas = value;\r\n    },\r\n    get scene() {\r\n        return global.scene;\r\n    },\r\n    set scene(value) {\r\n        global.scene = value;\r\n    },\r\n    get engine() {\r\n        return global.engine;\r\n    },\r\n    set engine(value) {\r\n        global.engine = value;\r\n    },\r\n    get TRACE() {\r\n        return global.TRACE;\r\n    },\r\n    set TRACE(value) {\r\n        global.TRACE = value;\r\n    },\r\n    activateCamera : activateCamera,\r\n    launch : launch,\r\n    ready : ready,\r\n    start : start,\r\n    pause : pause,\r\n    data : data,\r\n    on : on,\r\n    off : off,\r\n    one : one,\r\n    trigger : trigger,\r\n    select : select,\r\n    patch : patch,\r\n    match : match,\r\n    is : is,\r\n    color : color,\r\n    color4 : color4,\r\n    animate : animate,\r\n    activeCamera : activateCamera,\r\n    fn : global.fn,\r\n    queryString : queryString,\r\n    router : router,\r\n    show : show,\r\n    hide : hide,\r\n    loadingScreen : loadingScreen,\r\n    extend : extend,\r\n    merge : merge,\r\n    load : load\r\n};"],"names":["plugins.getPlugin","loop","start","on","e.on","off","e.off","one","e.one","trigger","e.trigger"],"mappings":"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"}